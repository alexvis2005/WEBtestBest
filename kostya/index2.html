<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WealthWise Pro — Платформа для инвестиций</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
<style>
  :root {
    --bg: #f7fbff;
    --card: #ffffff;
    --muted: #6b7280;
    --accent: #0ea5a3;
    --accent-2: #2563eb;
    --accent-3: #7c3aed;
    --accent-4: #f59e0b;
    --danger: #ef4444;
    --success: #10b981;
    --warning: #f59e0b;
    --glass: rgba(255,255,255,0.8);
    --radius: 14px;
    --radius-lg: 20px;
    --shadow: 0 8px 30px rgba(16,24,40,0.08);
    --shadow-lg: 0 20px 50px rgba(16,24,40,0.12);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  }
  .dark-theme {
    --bg: #0f172a;
    --card: #1e293b;
    --muted: #94a3b8;
    --glass: rgba(30, 41, 59, 0.7);
    --shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.4);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    margin: 0;
    background: linear-gradient(180deg, var(--bg), #eef6ff);
    color: #0f172a;
    line-height: 1.6;
    overflow-x: hidden;
    transition: var(--transition);
    min-height: 100vh;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    -webkit-overflow-scrolling: touch;
  }
  .dark-theme body {
    color: #f1f5f9;
    background: linear-gradient(180deg, var(--bg), #0d1525);
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
  @keyframes slideIn {
    from { transform: translateX(-100%); }
    to { transform: translateX(0); }
  }
  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  @keyframes coinFlip {
    0% { transform: rotateY(0); }
    50% { transform: rotateY(180deg); }
    100% { transform: rotateY(360deg); }
  }
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 clamp(16px, 5vw, 24px);
  }
  img, video, iframe, canvas, svg {
    max-width: 100%;
    height: auto;
    display: block;
  }
  .progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    width: 0%;
    height: 3px;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    z-index: 1000;
    transition: width 0.3s ease;
  }
  .back-to-top {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    box-shadow: 0 5px 20px rgba(14, 165, 163, 0.4);
    z-index: 99;
    opacity: 0;
    transform: translateY(20px);
    transition: var(--transition);
  }
  .back-to-top.visible { opacity: 1; transform: translateY(0); }
  .back-to-top:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(14, 165, 163, 0.6); }
  .ticker {
    position: sticky;
    top: 0;
    z-index: 35;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(15,23,42,0.06);
    padding: 12px 0;
    overflow: hidden;
    white-space: nowrap;
  }
  .dark-theme .ticker {
    background: rgba(30, 41, 59, 0.9);
    border-top: 1px solid rgba(255,255,255,0.05);
  }
  .ticker-content {
    display: inline-flex;
    animation: slideIn 30s linear infinite;
  }
  .ticker-item {
    display: inline-flex;
    align-items: center;
    margin: 0 30px;
    padding: 5px 15px;
    border-radius: 8px;
    background: rgba(14, 165, 163, 0.05);
  }
  .ticker-item i { margin-right: 8px; color: var(--accent); }
  .ticker-item.up { color: var(--success); }
  .ticker-item.down { color: var(--danger); }
  header {
    backdrop-filter: blur(10px);
    position: sticky;
    top: 40px;
    z-index: 40;
    background: var(--glass);
    border-bottom: 1px solid rgba(15,23,42,0.06);
    transition: var(--transition);
  }
  .dark-theme header {
    background: rgba(30, 41, 59, 0.8);
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 16px 0;
  }
  .brand {
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 700;
    font-size: 1.2rem;
  }
  .logo {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 800;
    font-size: 1.3rem;
    box-shadow: 0 5px 15px rgba(14, 165, 163, 0.3);
    animation: float 3s ease-in-out infinite;
    cursor: pointer;
  }
  .logo:hover { animation: coinFlip 1s ease; }
  nav ul {
    display: flex;
    gap: 24px;
    list-style: none;
    padding: 0;
    margin: 0;
  }
  nav a {
    color: var(--muted);
    text-decoration: none;
    font-weight: 600;
    transition: var(--transition);
    position: relative;
    padding: 5px 0;
  }
  nav a:hover { color: var(--accent); }
  nav a::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    transition: width 0.3s ease;
  }
  nav a:hover::after { width: 100%; }
  .cta {
    display: flex;
    gap: 12px;
    align-items: center;
  }
  .btn {
    padding: 12px 24px;
    border-radius: 12px;
    border: 0;
    cursor: pointer;
    font-weight: 700;
    font-size: 0.95rem;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    position: relative;
    overflow: hidden;
  }
  .btn::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.7s ease;
  }
  .btn:hover::after { left: 100%; }
  .btn-primary {
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color: white;
    box-shadow: 0 5px 15px rgba(14, 165, 163, 0.3);
  }
  .btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(14, 165, 163, 0.4);
  }
  .btn-secondary {
    background: linear-gradient(90deg, var(--accent-3), var(--accent-4));
    color: white;
    box-shadow: 0 5px 15px rgba(124, 58, 237, 0.3);
  }
  .btn-secondary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
  }
  .btn-ghost {
    background: transparent;
    border: 1px solid rgba(15,23,42,0.1);
    color: var(--muted);
  }
  .dark-theme .btn-ghost {
    border: 1px solid rgba(255,255,255,0.1);
  }
  .btn-ghost:hover {
    border-color: var(--accent);
    color: var(--accent);
    transform: translateY(-3px);
  }
  .btn-small { padding: 8px 16px; font-size: 0.85rem; }
  .btn-icon { padding: 10px; width: 40px; height: 40px; justify-content: center; }
  #mobileMenu {
    display: none;
    position: fixed;
    top: 0;
    right: 0;
    width: 300px;
    height: 100%;
    background: var(--glass);
    backdrop-filter: blur(20px);
    z-index: 1000;
    padding: 80px 30px 30px;
    box-shadow: -5px 0 30px rgba(0,0,0,0.1);
    transform: translateX(100%);
    transition: transform 0.3s ease;
  }
  #mobileMenu.active { transform: translateX(0); }
  .menu-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 999;
    backdrop-filter: blur(3px);
  }
  .menu-overlay.active { display: block; }
  .menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--muted);
    cursor: pointer;
    z-index: 1001;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    align-items: center;
    justify-content: center;
  }
  .menu-toggle:hover { background: rgba(14, 165, 163, 0.1); }
  .quick-access {
    position: fixed;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    z-index: 100;
    display: flex;
    flex-direction: column;
    gap: 10px;
    background: var(--glass);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 15px;
    box-shadow: var(--shadow-lg);
    border: 1px solid rgba(255,255,255,0.1);
  }
  .quick-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: var(--transition);
    position: relative;
  }
  .quick-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(14, 165, 163, 0.4);
  }
  .quick-btn .tooltip {
    position: absolute;
    left: 60px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--card);
    color: var(--muted);
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 0.85rem;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    box-shadow: var(--shadow);
  }
  .quick-btn:hover .tooltip { opacity: 1; }
  .ai-assistant {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
  }
  .assistant-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
    transition: var(--transition);
  }
  .assistant-btn:hover { transform: scale(1.1); }
  .assistant-chat {
    position: absolute;
    bottom: 70px;
    right: 0;
    width: 350px;
    max-height: 500px;
    background: var(--card);
    border-radius: 20px;
    box-shadow: var(--shadow-lg);
    display: none;
    flex-direction: column;
    overflow: hidden;
  }
  .assistant-chat.active {
    display: flex;
    animation: fadeIn 0.3s ease;
  }
  .chat-header {
    padding: 20px;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: white;
  }
  .chat-messages {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    max-height: 350px;
  }
  .message {
    margin-bottom: 15px;
    display: flex;
    gap: 10px;
  }
  .message.ai .avatar {
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
  }
  .message.user {
    flex-direction: row-reverse;
  }
  .message.user .avatar {
    background: linear-gradient(135deg, var(--accent-3), var(--accent-4));
  }
  .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    flex-shrink: 0;
  }
  .message-content {
    background: rgba(14, 165, 163, 0.1);
    padding: 12px 16px;
    border-radius: 18px;
    max-width: 70%;
  }
  .message.user .message-content {
    background: rgba(124, 58, 237, 0.1);
  }
  .chat-input {
    padding: 20px;
    border-top: 1px solid rgba(15,23,42,0.06);
  }
  .chat-input form {
    display: flex;
    gap: 10px;
  }
  .chat-input input {
    flex: 1;
    padding: 12px;
    border-radius: 25px;
    border: 1px solid rgba(15,23,42,0.1);
    background: var(--card);
    color: var(--muted);
  }
  .dark-theme .chat-input input {
    border: 1px solid rgba(255,255,255,0.1);
  }
  .notification {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--card);
    padding: 16px 24px;
    border-radius: 12px;
    box-shadow: var(--shadow-lg);
    border-left: 4px solid var(--accent);
    z-index: 1000;
    transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    max-width: 500px;
    width: 90%;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .notification.show { transform: translateX(-50%) translateY(0); }
  .notification-close {
    background: none;
    border: none;
    color: var(--muted);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 2000;
    backdrop-filter: blur(5px);
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .modal.active {
    display: flex;
    animation: fadeIn 0.3s ease;
  }
  .modal-content {
    background: var(--card);
    border-radius: var(--radius-lg);
    padding: 30px;
    max-width: 500px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
    position: relative;
  }
  .modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--muted);
    cursor: pointer;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .modal-close:hover { background: rgba(14, 165, 163, 0.1); }
  section {
    padding: 60px 0;
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  section.visible { opacity: 1; transform: translateY(0); }
  .section-header {
    text-align: center;
    margin-bottom: 48px;
  }
  .section-header h2 {
    font-size: clamp(1.8rem, 6vw, 2.5rem);
    margin-bottom: 12px;
    background: linear-gradient(90deg, var(--accent-2), var(--accent-3));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px;
  }
  .card {
    background: var(--card);
    padding: 28px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    transition: var(--transition);
    border: 1px solid transparent;
    animation: fadeIn 0.6s ease-out;
  }
  .dark-theme .card, .dark-theme .hero-card, .dark-theme .stat, .dark-theme .price {
    background: linear-gradient(180deg, #1e293b, #1a2436);
    border: 1px solid rgba(255,255,255,0.05);
  }
  .card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
    border-color: rgba(14, 165, 163, 0.1);
  }
  .card h3 { margin: 12px 0; font-size: 1.4rem; }
  .hero {
    display: grid;
    grid-template-columns: 1fr 460px;
    gap: 48px;
    padding: 80px 0;
    align-items: center;
    animation: fadeIn 1s ease-out;
  }
  .eyebrow {
    display: inline-block;
    padding: 8px 16px;
    border-radius: 999px;
    background: linear-gradient(90deg, #e6fffb, #f0f9ff);
    color: var(--accent);
    font-weight: 700;
    margin-bottom: 16px;
    font-size: 0.9rem;
  }
  h1 {
    font-size: clamp(2rem, 8vw, 3.2rem);
    margin: 0 0 16px;
    line-height: 1.2;
    background: linear-gradient(90deg, var(--accent-2), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  h2 { font-size: 2.5rem; margin-bottom: 12px; }
  p.lead {
    color: var(--muted);
    margin: 0 0 24px;
    font-size: 1.1rem;
    max-width: 90%;
  }
  .stats {
    display: flex;
    gap: 20px;
    margin-top: 24px;
    flex-wrap: wrap;
  }
  .stat {
    background: var(--card);
    padding: 20px;
    border-radius: 16px;
    box-shadow: var(--shadow);
    min-width: 140px;
    flex: 1;
    transition: var(--transition);
    border: 1px solid transparent;
  }
  .stat:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
    border-color: rgba(14, 165, 163, 0.2);
  }
  .stat strong { display: block; font-size: 1.8rem; margin-top: 5px; }
  .hero-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.9), #fff);
    padding: 28px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    animation: fadeIn 1s ease-out 0.3s both;
    border: 1px solid rgba(255,255,255,0.1);
  }
  .graph {
    height: 220px;
    border-radius: 12px;
    background: linear-gradient(180deg, #f8fdff, #eef7ff);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent-2);
    font-weight: 800;
    position: relative;
    overflow: hidden;
  }
  .dark-theme .graph {
    background: linear-gradient(180deg, #1e3a8a, #1e293b);
  }
  .graph::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
    animation: shimmer 2s infinite;
  }
  .market-weather {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    border-radius: 12px;
    background: linear-gradient(135deg, rgba(14, 165, 163, 0.1), rgba(37, 99, 235, 0.1));
    margin-bottom: 20px;
  }
  .weather-icon { font-size: 2.5rem; color: var(--accent-4); }
  .calculator-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  .tab-btn {
    padding: 10px 20px;
    border-radius: 10px;
    border: none;
    background: rgba(14, 165, 163, 0.1);
    color: var(--muted);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
  }
  .tab-btn:hover {
    background: rgba(14, 165, 163, 0.2);
    color: var(--accent);
  }
  .tab-btn.active {
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    color: white;
  }
  .calculator-content {
    display: none;
  }
  .calculator-content.active {
    display: block;
    animation: fadeIn 0.5s ease;
  }
  .converter-card {
    background: var(--card);
    padding: 24px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    margin-top: 20px;
  }
  .converter-row {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
    align-items: flex-end;
  }
  .converter-input { flex: 1; }
  .swap-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: var(--transition);
    margin-bottom: 15px;
  }
  .swap-btn:hover { transform: rotate(180deg); }
  .converter-result {
    margin-top: 20px;
    padding: 15px;
    border-radius: 12px;
    background: rgba(14, 165, 163, 0.05);
    border-left: 4px solid var(--accent);
  }
  .simulator-slider { margin-bottom: 20px; }
  .slider-label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }
  .slider-container {
    position: relative;
    height: 30px;
  }
  .slider-track {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 6px;
    background: rgba(14, 165, 163, 0.2);
    border-radius: 3px;
    transform: translateY(-50%);
  }
  .slider-fill {
    position: absolute;
    top: 50%;
    left: 0;
    height: 6px;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    border-radius: 3px;
    transform: translateY(-50%);
  }
  .slider-thumb {
    position: absolute;
    top: 50%;
    width: 24px;
    height: 24px;
    background: white;
    border: 3px solid var(--accent);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    cursor: pointer;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
  }
  .portfolio-simulator {
    background: linear-gradient(135deg, rgba(14, 165, 163, 0.05), rgba(37, 99, 235, 0.05));
    padding: 30px;
    border-radius: var(--radius-lg);
    margin-top: 30px;
  }
  .simulator-controls {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  .portfolio-chart {
    height: 300px;
    background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.4));
    border-radius: 12px;
    margin-top: 20px;
    position: relative;
    overflow: hidden;
  }
  .roi-table {
    margin-top: 20px;
    overflow-x: auto;
  }
  .roi-table table {
    width: 100%;
    border-collapse: collapse;
  }
  .roi-table th, .roi-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid rgba(15,23,42,0.06);
  }
  .roi-table th {
    font-weight: 700;
    color: var(--muted);
    font-size: 0.9rem;
  }
  .roi-table tr:hover { background: rgba(14, 165, 163, 0.05); }
  .crypto-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }
  .crypto-item {
    padding: 15px;
    border-radius: 12px;
    background: rgba(37, 99, 235, 0.05);
    border: 1px solid rgba(37, 99, 235, 0.1);
    transition: var(--transition);
    cursor: pointer;
  }
  .crypto-item:hover {
    transform: translateY(-5px);
    background: rgba(37, 99, 235, 0.1);
  }
  .crypto-item.selected {
    background: rgba(37, 99, 235, 0.2);
    border-color: var(--accent-2);
  }
  .rate-change.up { color: var(--success); }
  .rate-change.down { color: var(--danger); }
  .news-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px;
  }
  .news-card {
    background: var(--card);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: var(--transition);
  }
  .news-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
  }
  .news-image {
    height: 180px;
    width: 100%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 3rem;
  }
  .news-content { padding: 20px; }
  .news-tag {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 20px;
    background: rgba(14, 165, 163, 0.1);
    color: var(--accent);
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: 10px;
  }
  .testimonials-slider { margin-top: 40px; }
  .testimonial-card {
    background: var(--card);
    padding: 30px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    margin: 0 10px;
  }
  .testimonial-author {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-top: 20px;
  }
  .author-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
  }
  .signals-widget {
    background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(14,165,163,0.1));
    border-radius: var(--radius-lg);
    padding: 25px;
    margin: 30px 0;
    position: relative;
    overflow: hidden;
  }
  .signal-item {
    display: flex;
    align-items: center;
    padding: 15px;
    background: var(--card);
    border-radius: 10px;
    margin-bottom: 10px;
    animation: slideInRight 0.5s ease;
  }
  .signal-badge { margin-right: 15px; font-size: 1.5rem; }
  .signal-buy { color: var(--success); }
  .signal-sell { color: var(--danger); }
  .risk-analysis {
    background: linear-gradient(135deg, rgba(239,68,68,0.1), rgba(245,158,11,0.1));
    border-radius: var(--radius-lg);
    padding: 25px;
    margin: 30px 0;
  }
  .risk-meter {
    width: 100%;
    height: 20px;
    background: rgba(239,68,68,0.1);
    border-radius: 10px;
    margin: 20px 0;
    position: relative;
    overflow: hidden;
  }
  .risk-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 1s ease;
  }
  .risk-low { background: var(--success); width: 25%; }
  .risk-medium { background: var(--accent-4); width: 50%; }
  .risk-high { background: var(--danger); width: 75%; }
  .risk-very-high { background: #7c2d12; width: 90%; }
  .economic-calendar { margin-top: 30px; }
  .calendar-day {
    background: var(--card);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 15px;
  }
  .event-item {
    display: flex;
    align-items: center;
    padding: 12px;
    border-bottom: 1px solid rgba(15,23,42,0.06);
  }
  .event-item:last-child { border-bottom: none; }
  .event-time {
    min-width: 60px;
    font-weight: 600;
    color: var(--accent);
  }
  .event-content { flex: 1; margin: 0 15px; }
  .event-impact {
    width: 20px;
    height: 20px;
    border-radius: 50%;
  }
  .impact-high { background: var(--danger); }
  .impact-medium { background: var(--accent-4); }
  .impact-low { background: var(--success); }
  .recommendations {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }
  .recommendation-card {
    background: var(--card);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid transparent;
    transition: var(--transition);
  }
  .recommendation-card:hover {
    transform: translateY(-5px);
    border-color: var(--accent);
  }
  .rec-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: 10px;
  }
  .rec-buy { background: rgba(16,185,129,0.1); color: var(--success); }
  .rec-sell { background: rgba(239,68,68,0.1); color: var(--danger); }
  .rec-hold { background: rgba(245,158,11,0.1); color: var(--accent-4); }
  .goals-planner { margin-top: 40px; }
  .goal-card {
    background: var(--card);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .goal-progress { flex: 1; margin: 0 20px; }
  .progress-bar-horizontal {
    height: 10px;
    background: rgba(14, 165, 163, 0.1);
    border-radius: 5px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    border-radius: 5px;
    transition: width 1s ease;
  }
  .achievements {
    background: linear-gradient(135deg, rgba(14,165,163,0.1), rgba(37,99,235,0.1));
    border-radius: var(--radius-lg);
    padding: 25px;
    margin: 30px 0;
  }
  .achievement-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  .achievement-card {
    background: var(--card);
    padding: 20px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 15px;
  }
  .achievement-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
  }
  .achievement-locked { opacity: 0.5; filter: grayscale(1); }
  .portfolio-comparison { margin-top: 40px; }
  .comparison-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: var(--card);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: var(--shadow);
  }
  .comparison-table th {
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: white;
    padding: 15px;
    text-align: left;
  }
  .comparison-table td {
    padding: 15px;
    border-bottom: 1px solid rgba(15,23,42,0.06);
  }
  .comparison-table tr:hover { background: rgba(14, 165, 163, 0.05); }
  .trader-weather {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin: 20px 0;
  }
  .weather-card {
    background: var(--card);
    padding: 15px;
    border-radius: 12px;
    text-align: center;
    transition: var(--transition);
    border: 1px solid transparent;
  }
  .weather-card:hover {
    transform: translateY(-5px);
    border-color: rgba(14, 165, 163, 0.2);
  }
  .weather-card i { font-size: 2rem; margin-bottom: 10px; }
  .weather-card.up i { color: var(--success); }
  .weather-card.down i { color: var(--danger); }
  .weather-card.neutral i { color: var(--muted); }
  .budget-planner {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(14, 165, 163, 0.1));
    border-radius: var(--radius-lg);
    padding: 25px;
    margin: 30px 0;
  }
  .budget-category {
    margin-bottom: 20px;
  }
  .budget-bar {
    height: 20px;
    background: rgba(139, 92, 246, 0.1);
    border-radius: 10px;
    margin-top: 10px;
    position: relative;
    overflow: hidden;
  }
  .budget-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 1s ease;
  }
  .budget-warning { background: var(--danger); }
  .budget-good { background: var(--success); }
  .budget-ok { background: var(--accent-4); }
  .strategies-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }
  .strategy-card {
    background: var(--card);
    padding: 25px;
    border-radius: 15px;
    border: 2px solid transparent;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
  }
  .strategy-card:hover {
    transform: translateY(-8px);
    border-color: var(--accent);
  }
  .strategy-card.popular {
    border-color: var(--accent);
    box-shadow: 0 10px 30px rgba(14, 165, 163, 0.2);
  }
  .strategy-tag {
    position: absolute;
    top: 15px;
    right: 15px;
    background: var(--accent);
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 60; 
  }
  .stock-screener {
    margin-top: 40px;
  }
  .screener-filters {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  .stock-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }
  .stock-card {
    background: var(--card);
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    transition: var(--transition);
  }
  .stock-card:hover {
    transform: translateY(-5px);
    background: rgba(14, 165, 163, 0.05);
  }
  .financial-health {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(14, 165, 163, 0.1));
    border-radius: var(--radius-lg);
    padding: 30px;
    margin: 30px 0;
  }
  .health-score {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    background: conic-gradient(var(--success) 0% 75%, var(--accent-4) 75% 90%, var(--danger) 90% 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 30px;
    position: relative;
  }
  .health-score-inner {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: var(--card);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  .health-metrics {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }
  .learning-timeline {
    position: relative;
    max-width: 800px;
    margin: 40px auto;
  }
  .learning-timeline::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--accent);
    transform: translateX(-50%);
  }
  .timeline-item {
    margin-bottom: 40px;
    position: relative;
    width: 45%;
  }
  .timeline-item:nth-child(odd) {
    left: 0;
    text-align: right;
    padding-right: 60px;
  }
  .timeline-item:nth-child(even) {
    left: 55%;
    padding-left: 60px;
  }
  .timeline-dot {
    position: absolute;
    width: 20px;
    height: 20px;
    background: var(--accent);
    border-radius: 50%;
    top: 0;
  }
  .timeline-item:nth-child(odd) .timeline-dot {
    right: -10px;
  }
  .timeline-item:nth-child(even) .timeline-dot {
    left: -10px;
  }
  .social-trading {
    margin-top: 40px;
  }
  .trader-card {
    background: var(--card);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: var(--transition);
  }
  .trader-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
  }
  .trader-rank {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-4), var(--accent-3));
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
  }
  .podcast-player {
    background: var(--card);
    border-radius: var(--radius-lg);
    padding: 25px;
    margin: 30px 0;
    position: relative;
  }
  .audio-controls {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-top: 20px;
  }
  .play-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
  }
  .progress-container {
    flex: 1;
    height: 6px;
    background: rgba(14, 165, 163, 0.1);
    border-radius: 3px;
    position: relative;
    cursor: pointer;
  }
  .progress-bar-audio {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    border-radius: 3px;
    width: 30%;
  }
  .currency-widget {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(14, 165, 163, 0.1));
    border-radius: var(--radius-lg);
    padding: 25px;
    margin: 30px 0;
  }
  .currency-pair {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background: var(--card);
    border-radius: 10px;
    margin-bottom: 10px;
    transition: var(--transition);
  }
  .currency-pair:hover {
    transform: translateX(5px);
    background: rgba(14, 165, 163, 0.05);
  }

  /* ======================= */
  /*      MEDIA QUERIES      */
  /* ======================= */

  /* Планшеты и ноутбуки до 1100px */
  @media (max-width: 1100px) {
    .hero {
      grid-template-columns: 1fr;
      text-align: center;
    }
    p.lead {
      max-width: 100%;
      margin-left: auto;
      margin-right: auto;
    }
    .stats { justify-content: center; }
    .features { grid-template-columns: 1fr; }
    .pricing { flex-direction: column; }
    .price.popular { transform: none; }
    .price.popular:hover { transform: translateY(-8px); }
    .quick-access { display: none; }
  }

  /* Планшеты и крупные мобильники */
  @media (max-width: 992px) {
    .hero { gap: 32px; }
    .hero-card { margin-top: 30px; }
    .section-header h2 { font-size: clamp(1.6rem, 6vw, 2.2rem); }
  }

  /* Мобильные устройства */
  @media (max-width: 768px) {
    h1 { font-size: clamp(1.8rem, 7vw, 2.5rem); }
    .section-header h2 { font-size: clamp(1.4rem, 6vw, 2rem); }
    .menu-toggle { display: flex; }
    nav ul { display: none; }
    .theme-toggle { display: inline-flex; } /* Восстановлена видимость темы */
    .converter-row { flex-direction: column; }
    .swap-btn { align-self: center; margin: 10px 0; }
    .ai-assistant { bottom: 80px; right: 15px; }
    .assistant-chat {
      width: calc(100vw - 30px);
      right: -15px;
    }
    .trader-weather { grid-template-columns: repeat(2, 1fr); }
    .timeline-item {
      width: 100%;
      left: 0 !important;
      padding-left: 40px !important;
      padding-right: 0 !important;
      text-align: left !important;
    }
    .learning-timeline::before { left: 20px; }
    .timeline-item:nth-child(odd) .timeline-dot,
    .timeline-item:nth-child(even) .timeline-dot {
      left: 10px;
    }
  }

  /* Маленькие телефоны */
  @media (max-width: 480px) {
    .container { padding: 0 16px; }
    h1 { font-size: clamp(1.6rem, 8vw, 2rem); }
    .btn { padding: 10px 16px; font-size: 0.9rem; }
    .hero { padding: 40px 0; }
    section { padding: 40px 0; }
    .calculator-tabs { justify-content: center; }
    .trader-weather { grid-template-columns: 1fr; }
    .achievement-grid { grid-template-columns: 1fr; }
    .recommendations { grid-template-columns: 1fr; }
    .strategies-grid { grid-template-columns: 1fr; }
    .stock-grid { grid-template-columns: repeat(2, 1fr); }
  }

  /* Вспомогательные классы */
  .muted { color: var(--muted); }
  input, select, textarea {
    padding: 12px 16px;
    border-radius: 12px;
    border: 1px solid rgba(15,23,42,0.06);
    width: 100%;
    font-family: inherit;
    font-size: 1rem;
    transition: var(--transition);
  }
  .dark-theme input, .dark-theme select, .dark-theme textarea {
    background: #334155;
    border: 1px solid rgba(255,255,255,0.1);
    color: #f1f5f9;
  }
  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(14, 165, 163, 0.1);
  }
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--muted);
    font-size: 0.9rem;
  }
  .row {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }
  .center { text-align: center; }
  .icon { font-size: 1.2rem; }
  .badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
  }
  .badge-success { background: rgba(16, 185, 129, 0.1); color: var(--success); }
  .badge-danger { background: rgba(239, 68, 68, 0.1); color: var(--danger); }
  .badge-primary { background: rgba(14, 165, 163, 0.1); color: var(--accent); }
  .badge-warning { background: rgba(245, 158, 11, 0.1); color: var(--accent-4); }
  .theme-toggle {
    background: none;
    border: none;
    color: var(--muted);
    font-size: 1.2rem;
    cursor: pointer;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
  }
  .theme-toggle:hover {
    background: rgba(14, 165, 163, 0.1);
    color: var(--accent);
  }
  .price {
    flex: 1;
    background: linear-gradient(180deg, #fff, #f8fbff);
    padding: 32px;
    border-radius: var(--radius-lg);
    border: 1px solid rgba(15,23,42,0.04);
    transition: var(--transition);
    position: relative;
    overflow: hidden;
  }
  .price:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
  }
  .price.popular {
    border: 2px solid var(--accent);
    transform: scale(1.05);
  }
  .price.popular:hover {
    transform: scale(1.05) translateY(-8px);
  }
  .popular-badge {
    position: absolute;
    top: 0;
    right: 20px;
    background: var(--accent);
    color: white;
    padding: 6px 12px;
    border-radius: 0 0 8px 8px;
    font-size: 0.8rem;
    font-weight: 700;
  }
  .pricing { display: flex; gap: 24px; }
  .features { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
  .posts { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; }
  footer {
    padding: 40px 0;
    background: transparent;
    border-top: 1px solid rgba(15,23,42,0.04);
    margin-top: 40px;
  }
  .badge-purple { background: rgba(139, 92, 246, 0.1); color: #8b5cf6; }
  .badge-gradient {
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: white;
  }
  .glass-effect {
    background: var(--glass);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
  }
  .gradient-text {
    background: linear-gradient(90deg, var(--accent), var(--accent-2), var(--accent-3));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    background-size: 200% auto;
    animation: gradient 3s ease infinite;
  }
  .pulse-animation {
    animation: pulse 2s infinite;
  }
  .count-up {
    font-variant-numeric: tabular-nums;
  }
</style>
</head>
<body>
  <div class="progress-bar" id="progressBar"></div>
  <button class="back-to-top" id="backToTop">
    <i class="fas fa-chevron-up"></i>
  </button>
  <div class="quick-access">
    <button class="quick-btn" onclick="quickAction('convert')">
      <i class="fas fa-exchange-alt"></i>
      <span class="tooltip">Конвертер валют</span>
    </button>
    <button class="quick-btn" onclick="quickAction('calculator')">
      <i class="fas fa-calculator"></i>
      <span class="tooltip">Калькулятор</span>
    </button>
    <button class="quick-btn" onclick="quickAction('portfolio')">
      <i class="fas fa-chart-pie"></i>
      <span class="tooltip">Портфель</span>
    </button>
    <button class="quick-btn" onclick="quickAction('signals')">
      <i class="fas fa-bolt"></i>
      <span class="tooltip">Сигналы</span>
    </button>
    <button class="quick-btn" onclick="quickAction('screener')">
      <i class="fas fa-search-dollar"></i>
      <span class="tooltip">Скринер</span>
    </button>
    <button class="quick-btn" onclick="generateReport()">
      <i class="fas fa-file-download"></i>
      <span class="tooltip">Отчет</span>
    </button>
    <button class="quick-btn" onclick="toggleAssistant()">
      <i class="fas fa-robot"></i>
      <span class="tooltip">Помощник</span>
    </button>
  </div>
  <div class="ai-assistant">
    <div class="assistant-chat" id="assistantChat">
      <div class="chat-header">
        <h4 style="margin: 0;"><i class="fas fa-robot"></i> Финансовый помощник</h4>
        <div class="muted" style="font-size: 0.85rem; margin-top: 5px;">Готов помочь с инвестициями</div>
      </div>
      <div class="chat-messages" id="chatMessages">
        <div class="message ai">
          <div class="avatar">AI</div>
          <div class="message-content">
            Привет! Я ваш финансовый помощник. Могу помочь с расчетами, анализом портфеля или ответить на вопросы об инвестициях.
          </div>
        </div>
      </div>
      <div class="chat-input">
        <form id="chatForm" onsubmit="sendMessage(event)">
          <input type="text" id="chatInput" placeholder="Задайте вопрос..." autocomplete="off">
          <button type="submit" class="btn btn-primary btn-icon">
            <i class="fas fa-paper-plane"></i>
          </button>
        </form>
      </div>
    </div>
    <button class="assistant-btn" onclick="toggleAssistant()">
      <i class="fas fa-robot"></i>
    </button>
  </div>
  <div class="ticker">
    <div class="ticker-content" id="tickerContent"></div>
  </div>
  <div class="notification" id="notification">
    <div>
      <strong>Добро пожаловать в WealthWise Pro!</strong>
      <div class="muted" style="font-size: 0.9rem; margin-top: 4px;">Используйте все инструменты для эффективного инвестирования</div>
    </div>
    <button class="notification-close" id="closeNotification">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="modal" id="settingsModal">
    <div class="modal-content">
      <button class="modal-close" id="closeSettings">
        <i class="fas fa-times"></i>
      </button>
      <h3 style="margin-bottom: 20px;">Настройки платформы</h3>
      <div style="margin-bottom: 25px;">
        <h4 style="margin-bottom: 15px;">Тема</h4>
        <div class="row">
          <button class="btn btn-ghost theme-option active" data-theme="light">
            <i class="fas fa-sun"></i> Светлая
          </button>
          <button class="btn btn-ghost theme-option" data-theme="dark">
            <i class="fas fa-moon"></i> Темная
          </button>
          <button class="btn btn-ghost theme-option" data-theme="auto">
            <i class="fas fa-adjust"></i> Авто
          </button>
        </div>
      </div>
      <div style="margin-bottom: 25px;">
        <h4 style="margin-bottom: 15px;">Валюта по умолчанию</h4>
        <select id="defaultCurrency" style="width: 100%;">
          <option value="RUB">Рубль (RUB)</option>
          <option value="USD">Доллар (USD)</option>
          <option value="EUR">Евро (EUR)</option>
          <option value="CNY">Юань (CNY)</option>
        </select>
      </div>
      <div style="margin-bottom: 25px;">
        <h4 style="margin-bottom: 15px;">Автосохранение</h4>
        <label style="display: flex; align-items: center; gap: 10px;">
          <input type="checkbox" id="autoSave" checked>
          <span>Сохранять данные каждые 30 секунд</span>
        </label>
      </div>
      <div style="margin-bottom: 25px;">
        <h4 style="margin-bottom: 15px;">Уведомления</h4>
        <div style="display: flex; flex-direction: column; gap: 10px;">
          <label style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="notifyMarket" checked>
            <span>Изменения на рынке</span>
          </label>
          <label style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="notifySignals" checked>
            <span>Торговые сигналы</span>
          </label>
          <label style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="notifyGoals" checked>
            <span>Прогресс целей</span>
          </label>
          <label style="display: flex; align-items: center; gap: 10px;">
            <input type="checkbox" id="notifyNews">
            <span>Новости и аналитика</span>
          </label>
        </div>
      </div>
      <button class="btn btn-primary" style="width: 100%;" onclick="saveSettings()">
        <i class="fas fa-save"></i> Сохранить настройки
      </button>
    </div>
  </div>
  <div class="menu-overlay" id="menuOverlay"></div>
  <div id="mobileMenu">
    <div style="margin-bottom: 30px;">
      <div class="brand" style="justify-content: center;">
        <div class="logo">W</div>
        <div>
          <div>WealthWise Pro</div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px">Инвестиционная платформа</div>
        </div>
      </div>
    </div>
    <ul style="list-style: none; padding: 0;">
      <li style="margin-bottom: 15px;"><a href="#services" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-concierge-bell" style="margin-right: 10px;"></i> Услуги</a></li>
      <li style="margin-bottom: 15px;"><a href="#calculators" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-calculator" style="margin-right: 10px;"></i> Калькуляторы</a></li>
      <li style="margin-bottom: 15px;"><a href="#portfolio" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-chart-pie" style="margin-right: 10px;"></i> Портфель</a></li>
      <li style="margin-bottom: 15px;"><a href="#pricing" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-tags" style="margin-right: 10px;"></i> Тарифы</a></li>
      <li style="margin-bottom: 15px;"><a href="#news" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-newspaper" style="margin-right: 10px;"></i> Новости</a></li>
      <li style="margin-bottom: 15px;"><a href="#signals" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-bolt" style="margin-right: 10px;"></i> Сигналы</a></li>
      <li style="margin-bottom: 15px;"><a href="#screener" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-search-dollar" style="margin-right: 10px;"></i> Скринер</a></li>
      <li style="margin-bottom: 15px;"><a href="#goals" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-bullseye" style="margin-right: 10px;"></i> Цели</a></li>
      <li style="margin-bottom: 15px;"><a href="#learning" class="mobile-nav-link" style="display: block; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none;"><i class="fas fa-graduation-cap" style="margin-right: 10px;"></i> Обучение</a></li>
      <li style="margin-bottom: 15px;"><button onclick="openSettings()" style="display: block; width: 100%; padding: 12px; background: rgba(14, 165, 163, 0.1); border-radius: 10px; color: var(--accent); font-weight: 700; text-decoration: none; border: none; text-align: left; cursor: pointer;"><i class="fas fa-cog" style="margin-right: 10px;"></i> Настройки</button></li>
    </ul>
    <div style="position: absolute; bottom: 30px; left: 30px; right: 30px;">
      <button class="btn btn-primary" style="width: 100%;" onclick="closeMobileMenu(); openAccount();">
        <i class="fas fa-rocket"></i> Начать инвестировать
      </button>
    </div>
  </div>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo" onclick="logoAnimation()">W</div>
        <div>
          <div class="gradient-text">WealthWise Pro</div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px">Платформа для инвестиций</div>
        </div>
      </div>
      <nav>
        <ul>
          <li><a href="#services"><i class="fas fa-concierge-bell" style="margin-right: 8px;"></i> Услуги</a></li>
          <li><a href="#calculators"><i class="fas fa-calculator" style="margin-right: 8px;"></i> Калькуляторы</a></li>
          <li><a href="#portfolio"><i class="fas fa-chart-pie" style="margin-right: 8px;"></i> Портфель</a></li>
          <li><a href="#signals"><i class="fas fa-bolt" style="margin-right: 8px;"></i> Сигналы</a></li>
          <li><a href="#screener"><i class="fas fa-search-dollar" style="margin-right: 8px;"></i> Скринер</a></li>
          <li><a href="#goals"><i class="fas fa-bullseye" style="margin-right: 8px;"></i> Цели</a></li>
          <li><a href="#learning"><i class="fas fa-graduation-cap" style="margin-right: 8px;"></i> Обучение</a></li>
          <li><a href="#pricing"><i class="fas fa-tags" style="margin-right: 8px;"></i> Тарифы</a></li>
          <li><a href="#news"><i class="fas fa-newspaper" style="margin-right: 8px;"></i> Новости</a></li>
        </ul>
      </nav>
      <div class="cta">
        <button class="btn btn-ghost" onclick="toggleCalc()">
          <i class="fas fa-calculator"></i> Инструменты
        </button>
        <button class="btn-icon btn-ghost" onclick="openSettings()" title="Настройки">
          <i class="fas fa-cog"></i>
        </button>
        <button class="btn btn-primary" onclick="openAccount()">
          <i class="fas fa-rocket"></i> Начать
        </button>
        <button class="menu-toggle" id="menuToggle">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
  </header>
  <main class="container">
    <section class="hero">
      <div>
        <span class="eyebrow">
          <i class="fas fa-chart-line" style="margin-right: 8px;"></i> Премиум инвестиции
        </span>
        <h1 class="gradient-text">Инвестируйте с умом и увеличивайте капитал</h1>
        <p class="lead">Профессиональная платформа для инвестиций с ИИ-помощником, аналитикой в реальном времени и всеми необходимыми инструментами для успешного трейдинга.</p>
        <div class="market-weather">
          <div class="weather-icon">
            <i class="fas fa-sun"></i>
          </div>
          <div class="weather-content">
            <h4>Рыночная погода: "Солнечно"</h4>
            <p>Основные индексы растут, благоприятные условия для инвестиций</p>
          </div>
        </div>
        <div class="stats">
          <div class="stat">
            <span class="muted">Доходность Pro</span>
            <strong class="count-up">+14.2%</strong>
            <div class="muted" style="font-size: 0.85rem; margin-top: 5px;">Средняя за год</div>
          </div>
          <div class="stat">
            <span class="muted">Активных портфелей</span>
            <strong class="count-up">2,850+</strong>
            <div class="muted" style="font-size: 0.85rem; margin-top: 5px;">Управляется нами</div>
          </div>
          <div class="stat">
            <span class="muted">Торговых сигналов</span>
            <strong class="count-up">128</strong>
            <div class="muted" style="font-size: 0.85rem; margin-top: 5px;">За месяц</div>
          </div>
        </div>
        <div style="margin-top:28px;display:flex;gap:16px;flex-wrap: wrap;">
          <button class="btn btn-primary" onclick="openAccount()">
            <i class="fas fa-wallet"></i> Открыть Pro-счет
          </button>
          <button class="btn btn-secondary" onclick="scrollToSection('calculators')">
            <i class="fas fa-calculator"></i> Бесплатные инструменты
          </button>
          <button class="btn btn-ghost" onclick="showDemo()">
            <i class="fas fa-play-circle"></i> Демо-режим
          </button>
        </div>
      </div>
      <aside class="hero-card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
          <div>
            <div style="font-size:14px;color:var(--muted)">Ваш прогноз</div>
            <div style="font-weight:800;font-size:20px" class="gradient-text">Рост портфеля</div>
          </div>
          <div style="text-align:right">
            <div class="muted" style="font-size:12px">Уровень риска</div>
            <div style="font-weight:700; color: var(--accent)">Сбалансированный</div>
          </div>
        </div>
        <div class="graph">
          <canvas id="portfolioChart" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div style="display:flex;gap:16px;margin-top:20px">
          <div style="flex:1">
            <small class="muted">Текущий баланс</small>
            <div style="font-weight:800; font-size: 1.2rem;" id="portfolioBalance">1 847 320 ₽</div>
          </div>
          <div style="flex:1">
            <small class="muted">Доходность</small>
            <div style="font-weight:800;color:var(--success); font-size: 1.2rem;" id="portfolioReturn">+12.4%</div>
          </div>
        </div>
        <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(15,23,42,0.06);">
          <button class="btn btn-primary" style="width: 100%;" onclick="showNotification('Демо-портфель создан! Можете начать тестирование')">
            <i class="fas fa-play-circle"></i> Запустить демо-портфель
          </button>
        </div>
      </aside>
    </section>
    <section id="calculators">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-calculator"></i> Инструменты</span>
        <h2 class="gradient-text">Финансовые калькуляторы</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Точные расчеты для принятия обоснованных решений</p>
      </div>
      <div class="calculator-tabs">
        <button class="tab-btn active" onclick="switchCalculator('roi')">
          <i class="fas fa-chart-line"></i> ROI-калькулятор
        </button>
        <button class="tab-btn" onclick="switchCalculator('currency')">
          <i class="fas fa-exchange-alt"></i> Конвертер валют
        </button>
        <button class="tab-btn" onclick="switchCalculator('crypto')">
          <i class="fab fa-bitcoin"></i> Криптокалькулятор
        </button>
        <button class="tab-btn" onclick="switchCalculator('loan')">
          <i class="fas fa-home"></i> Кредитный калькулятор
        </button>
        <button class="tab-btn" onclick="switchCalculator('compound')">
          <i class="fas fa-snowflake"></i> Сложный процент
        </button>
        <button class="tab-btn" onclick="switchCalculator('budget')">
          <i class="fas fa-wallet"></i> Бюджет
        </button>
      </div>
      <!-- ВСЕ 6 КАЛЬКУЛЯТОРОВ -->
      <div id="roi-calculator" class="calculator-content active">
        <div class="card">
          <h3><i class="fas fa-chart-line" style="color: var(--accent); margin-right: 10px;"></i> ROI-калькулятор инвестиций</h3>
          <p class="muted">Рассчитайте доходность ваших инвестиций с учетом сложного процента.</p>
          <div class="row" style="margin-top: 20px;">
            <div class="converter-input">
              <label>Сумма инвестиций</label>
              <div style="position: relative;">
                <input id="principal" type="number" value="100000" min="0" step="1000" />
                <div style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--muted);">₽</div>
              </div>
            </div>
            <div class="converter-input">
              <label>Срок инвестирования (лет)</label>
              <input id="years" type="number" value="5" min="1" max="50" step="1" />
            </div>
          </div>
          <div style="margin-top: 20px;">
            <label>Годовая доходность (%)</label>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>0%</span>
                <span id="rateValue">8%</span>
                <span>25%</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="rateFill" style="width: 32%;"></div>
                <div class="slider-thumb" id="rateThumb" style="left: 32%;" onmousedown="startSliderDrag(event, 'rate')"></div>
              </div>
            </div>
          </div>
          <div style="margin-top:20px" class="row">
            <button class="btn btn-primary" onclick="calculateROI()">
              <i class="fas fa-chart-line"></i> Рассчитать
            </button>
            <button class="btn btn-ghost" onclick="clearROI()">
              <i class="fas fa-redo"></i> Очистить
            </button>
            <button class="btn btn-ghost" onclick="generateTable()">
              <i class="fas fa-table"></i> Таблица роста
            </button>
          </div>
          <div id="roiResult" style="margin-top:20px; padding: 16px; background: rgba(14, 165, 163, 0.05); border-radius: 12px; border-left: 4px solid var(--accent);"></div>
          <div id="roiTable" class="roi-table" style="display: none; margin-top: 20px;"></div>
        </div>
      </div>
      <div id="currency-calculator" class="calculator-content">
        <div class="card">
          <h3><i class="fas fa-exchange-alt" style="color: var(--accent); margin-right: 10px;"></i> Конвертер валют</h3>
          <p class="muted">Конвертируйте валюты по актуальному курсу.</p>
          <div class="converter-row">
            <div class="converter-input">
              <label>Из</label>
              <div style="position: relative;">
                <input id="fromAmount" type="number" value="1000" min="0" step="1" />
                <select id="fromCurrency" style="position: absolute; right: 0; top: 0; bottom: 0; width: 80px; border-left: 1px solid rgba(15,23,42,0.06);">
                  <option value="RUB">RUB</option>
                  <option value="USD">USD</option>
                  <option value="EUR">EUR</option>
                  <option value="CNY">CNY</option>
                  <option value="GBP">GBP</option>
                  <option value="JPY">JPY</option>
                </select>
              </div>
            </div>
            <button class="swap-btn" onclick="swapCurrencies()">
              <i class="fas fa-exchange-alt"></i>
            </button>
            <div class="converter-input">
              <label>В</label>
              <div style="position: relative;">
                <input id="toAmount" type="number" readonly style="background: rgba(14, 165, 163, 0.05);" />
                <select id="toCurrency" style="position: absolute; right: 0; top: 0; bottom: 0; width: 80px; border-left: 1px solid rgba(15,23,42,0.06);">
                  <option value="USD">USD</option>
                  <option value="RUB">RUB</option>
                  <option value="EUR">EUR</option>
                  <option value="CNY">CNY</option>
                  <option value="GBP">GBP</option>
                  <option value="JPY">JPY</option>
                </select>
              </div>
            </div>
          </div>
          <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="convertCurrency()">
            <i class="fas fa-sync-alt"></i> Конвертировать
          </button>
          <div id="currencyResult" class="converter-result"></div>
          <div class="currency-widget" style="margin-top: 30px;">
            <h4 style="margin-bottom: 15px;">Популярные курсы</h4>
            <div class="currency-pair">
              <div>
                <div style="font-weight: 700;">USD/RUB</div>
                <div class="muted" style="font-size: 0.85rem;">Доллар к рублю</div>
              </div>
              <div style="text-align: right;">
                <div style="font-weight: 700;">92.45</div>
                <div class="rate-change up" style="font-size: 0.85rem;"><i class="fas fa-arrow-up"></i> +0.5%</div>
              </div>
            </div>
            <div class="currency-pair">
              <div>
                <div style="font-weight: 700;">EUR/RUB</div>
                <div class="muted" style="font-size: 0.85rem;">Евро к рублю</div>
              </div>
              <div style="text-align: right;">
                <div style="font-weight: 700;">99.80</div>
                <div class="rate-change down" style="font-size: 0.85rem;"><i class="fas fa-arrow-down"></i> -0.3%</div>
              </div>
            </div>
            <div class="currency-pair">
              <div>
                <div style="font-weight: 700;">CNY/RUB</div>
                <div class="muted" style="font-size: 0.85rem;">Юань к рублю</div>
              </div>
              <div style="text-align: right;">
                <div style="font-weight: 700;">12.75</div>
                <div class="rate-change up" style="font-size: 0.85rem;"><i class="fas fa-arrow-up"></i> +0.2%</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="crypto-calculator" class="calculator-content">
        <div class="card">
          <h3><i class="fab fa-bitcoin" style="color: var(--accent-4); margin-right: 10px;"></i> Криптокалькулятор</h3>
          <p class="muted">Конвертируйте криптовалюты и рассчитывайте доходность.</p>
          <div class="converter-row">
            <div class="converter-input">
              <label>Из криптовалюты</label>
              <div style="position: relative;">
                <input id="cryptoFromAmount" type="number" value="1" min="0" step="0.001" />
                <select id="cryptoFromCurrency" style="position: absolute; right: 0; top: 0; bottom: 0; width: 120px; border-left: 1px solid rgba(15,23,42,0.06);">
                  <option value="BTC">Bitcoin (BTC)</option>
                  <option value="ETH">Ethereum (ETH)</option>
                  <option value="USDT">Tether (USDT)</option>
                  <option value="BNB">BNB (BNB)</option>
                  <option value="XRP">XRP (XRP)</option>
                  <option value="SOL">Solana (SOL)</option>
                </select>
              </div>
            </div>
            <div class="converter-input">
              <label>В валюту</label>
              <div style="position: relative;">
                <input id="cryptoToAmount" type="number" readonly style="background: rgba(14, 165, 163, 0.05);" />
                <select id="cryptoToCurrency" style="position: absolute; right: 0; top: 0; bottom: 0; width: 100px; border-left: 1px solid rgba(15,23,42,0.06);">
                  <option value="RUB">RUB</option>
                  <option value="USD">USD</option>
                  <option value="EUR">EUR</option>
                  <option value="CNY">CNY</option>
                </select>
              </div>
            </div>
          </div>
          <button class="btn btn-secondary" style="width: 100%; margin-top: 20px;" onclick="convertCrypto()">
            <i class="fas fa-sync-alt"></i> Конвертировать
          </button>
          <div id="cryptoResult" class="converter-result"></div>
          <div style="margin-top: 30px;">
            <h4 style="margin-bottom: 15px;">Топ криптовалюты</h4>
            <div class="crypto-grid">
              <div class="crypto-item" onclick="selectCrypto('BTC')">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                  <div style="width: 30px; height: 30px; border-radius: 50%; background: #F7931A; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">B</div>
                  <div>
                    <div style="font-weight: 700;">Bitcoin</div>
                    <div class="muted" style="font-size: 0.8rem;">BTC</div>
                  </div>
                </div>
                <div style="font-weight: 700; font-size: 1.1rem;">$67,450</div>
                <div class="rate-change up" style="font-size: 0.9rem;"><i class="fas fa-arrow-up"></i> +3.2%</div>
              </div>
              <div class="crypto-item" onclick="selectCrypto('ETH')">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                  <div style="width: 30px; height: 30px; border-radius: 50%; background: #627EEA; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">E</div>
                  <div>
                    <div style="font-weight: 700;">Ethereum</div>
                    <div class="muted" style="font-size: 0.8rem;">ETH</div>
                  </div>
                </div>
                <div style="font-weight: 700; font-size: 1.1rem;">$3,450</div>
                <div class="rate-change up" style="font-size: 0.9rem;"><i class="fas fa-arrow-up"></i> +1.8%</div>
              </div>
              <div class="crypto-item" onclick="selectCrypto('SOL')">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                  <div style="width: 30px; height: 30px; border-radius: 50%; background: #00FFA3; display: flex; align-items: center; justify-content: center; color: #000; font-weight: bold;">S</div>
                  <div>
                    <div style="font-weight: 700;">Solana</div>
                    <div class="muted" style="font-size: 0.8rem;">SOL</div>
                  </div>
                </div>
                <div style="font-weight: 700; font-size: 1.1rem;">$165</div>
                <div class="rate-change down" style="font-size: 0.9rem;"><i class="fas fa-arrow-down"></i> -0.5%</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="loan-calculator" class="calculator-content">
        <div class="card">
          <h3><i class="fas fa-home" style="color: var(--accent-3); margin-right: 10px;"></i> Кредитный калькулятор</h3>
          <p class="muted">Рассчитайте ежемесячный платеж по кредиту.</p>
          <div style="margin-top: 20px;">
            <label>Сумма кредита</label>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>0 ₽</span>
                <span id="loanAmountValue">1 000 000 ₽</span>
                <span>10 000 000 ₽</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="loanAmountFill" style="width: 10%;"></div>
                <div class="slider-thumb" id="loanAmountThumb" style="left: 10%;" onmousedown="startSliderDrag(event, 'loanAmount')"></div>
              </div>
            </div>
          </div>
          <div style="margin-top: 20px;">
            <label>Срок кредита (лет)</label>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>1 год</span>
                <span id="loanTermValue">10 лет</span>
                <span>30 лет</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="loanTermFill" style="width: 33%;"></div>
                <div class="slider-thumb" id="loanTermThumb" style="left: 33%;" onmousedown="startSliderDrag(event, 'loanTerm')"></div>
              </div>
            </div>
          </div>
          <div style="margin-top: 20px;">
            <label>Процентная ставка (%)</label>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>1%</span>
                <span id="loanRateValue">8%</span>
                <span>25%</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="loanRateFill" style="width: 28%;"></div>
                <div class="slider-thumb" id="loanRateThumb" style="left: 28%;" onmousedown="startSliderDrag(event, 'loanRate')"></div>
              </div>
            </div>
          </div>
          <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="calculateLoan()">
            <i class="fas fa-calculator"></i> Рассчитать платеж
          </button>
          <div id="loanResult" class="converter-result" style="margin-top: 20px;"></div>
        </div>
      </div>
      <div id="compound-calculator" class="calculator-content">
        <div class="card">
          <h3><i class="fas fa-snowflake" style="color: var(--accent); margin-right: 10px;"></i> Калькулятор сложного процента</h3>
          <p class="muted">Рассчитайте рост инвестиций со сложным процентом и регулярными пополнениями.</p>
          <div class="row" style="margin-top: 20px;">
            <div class="converter-input">
              <label>Начальная сумма</label>
              <input id="compoundPrincipal" type="number" value="100000" min="0" step="1000" />
            </div>
            <div class="converter-input">
              <label>Ежемесячное пополнение</label>
              <input id="monthlyAddition" type="number" value="5000" min="0" step="1000" />
            </div>
          </div>
          <div class="row" style="margin-top: 20px;">
            <div class="converter-input">
              <label>Годовая доходность (%)</label>
              <input id="compoundRate" type="number" value="8" min="0" max="50" step="0.1" />
            </div>
            <div class="converter-input">
              <label>Срок (лет)</label>
              <input id="compoundYears" type="number" value="10" min="1" max="50" step="1" />
            </div>
          </div>
          <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="calculateCompound()">
            <i class="fas fa-chart-line"></i> Рассчитать сложный процент
          </button>
          <div id="compoundResult" class="converter-result" style="margin-top: 20px;"></div>
        </div>
      </div>
      <div id="budget-calculator" class="calculator-content">
        <div class="card">
          <h3><i class="fas fa-wallet" style="color: var(--accent-3); margin-right: 10px;"></i> Планировщик бюджета</h3>
          <p class="muted">Спланируйте свой месячный бюджет и отслеживайте расходы.</p>
          <div class="budget-planner">
            <div class="budget-category">
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <div style="font-weight: 600;">Жилье</div>
                <div>25,000 ₽ / 30,000 ₽</div>
              </div>
              <div class="budget-bar">
                <div class="budget-fill budget-good" style="width: 83%;"></div>
              </div>
            </div>
            <div class="budget-category">
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <div style="font-weight: 600;">Транспорт</div>
                <div>8,000 ₽ / 10,000 ₽</div>
              </div>
              <div class="budget-bar">
                <div class="budget-fill budget-ok" style="width: 80%;"></div>
              </div>
            </div>
            <div class="budget-category">
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <div style="font-weight: 600;">Развлечения</div>
                <div>12,000 ₽ / 8,000 ₽</div>
              </div>
              <div class="budget-bar">
                <div class="budget-fill budget-warning" style="width: 150%;"></div>
              </div>
            </div>
            <div class="budget-category">
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <div style="font-weight: 600;">Инвестиции</div>
                <div>15,000 ₽ / 20,000 ₽</div>
              </div>
              <div class="budget-bar">
                <div class="budget-fill budget-good" style="width: 75%;"></div>
              </div>
            </div>
          </div>
          <div style="margin-top: 20px;">
            <h4>Сводка бюджета</h4>
            <div class="row" style="margin-top: 15px; text-align: center;">
              <div style="flex: 1;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);">60,000 ₽</div>
                <div class="muted" style="font-size: 0.9rem;">Доход</div>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--danger);">45,000 ₽</div>
                <div class="muted" style="font-size: 0.9rem;">Расходы</div>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent);">15,000 ₽</div>
                <div class="muted" style="font-size: 0.9rem;">Сбережения</div>
              </div>
            </div>
          </div>
          <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="editBudget()">
            <i class="fas fa-edit"></i> Редактировать бюджет
          </button>
        </div>
      </div>
    </section>
    <section id="portfolio">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-chart-pie"></i> Управление</span>
        <h2 class="gradient-text">Симулятор инвестиционного портфеля</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Создайте и протестируйте свой портфель с разными активами</p>
      </div>
      <div class="portfolio-simulator">
        <div class="simulator-controls">
          <div class="card">
            <h4><i class="fas fa-chart-line" style="color: #2563eb;"></i> Акции</h4>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>0%</span>
                <span id="stocksValue">40%</span>
                <span>100%</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="stocksFill" style="width: 40%; background: linear-gradient(90deg, #2563eb, #3b82f6);"></div>
                <div class="slider-thumb" id="stocksThumb" style="left: 40%;" onmousedown="startSliderDrag(event, 'stocks')"></div>
              </div>
            </div>
          </div>
          <div class="card">
            <h4><i class="fas fa-file-invoice-dollar" style="color: #10b981;"></i> Облигации</h4>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>0%</span>
                <span id="bondsValue">30%</span>
                <span>100%</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="bondsFill" style="width: 30%; background: linear-gradient(90deg, #10b981, #34d399);"></div>
                <div class="slider-thumb" id="bondsThumb" style="left: 30%;" onmousedown="startSliderDrag(event, 'bonds')"></div>
              </div>
            </div>
          </div>
          <div class="card">
            <h4><i class="fab fa-bitcoin" style="color: #f59e0b;"></i> Криптовалюты</h4>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>0%</span>
                <span id="cryptoValue">20%</span>
                <span>100%</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="cryptoFill" style="width: 20%; background: linear-gradient(90deg, #f59e0b, #fbbf24);"></div>
                <div class="slider-thumb" id="cryptoThumb" style="left: 20%;" onmousedown="startSliderDrag(event, 'crypto')"></div>
              </div>
            </div>
          </div>
          <div class="card">
            <h4><i class="fas fa-home" style="color: #8b5cf6;"></i> Недвижимость</h4>
            <div class="simulator-slider">
              <div class="slider-label">
                <span>0%</span>
                <span id="realEstateValue">10%</span>
                <span>100%</span>
              </div>
              <div class="slider-container">
                <div class="slider-track"></div>
                <div class="slider-fill" id="realEstateFill" style="width: 10%; background: linear-gradient(90deg, #8b5cf6, #a78bfa);"></div>
                <div class="slider-thumb" id="realEstateThumb" style="left: 10%;" onmousedown="startSliderDrag(event, 'realEstate')"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" style="margin-top: 30px; gap: 20px;">
          <div class="card" style="flex: 1;">
            <h4>Ожидаемая доходность</h4>
            <div style="font-size: 2rem; font-weight: 800; color: var(--accent); margin: 15px 0;" id="expectedReturn">9.2%</div>
            <div class="muted">Годовая доходность при текущем распределении</div>
          </div>
          <div class="card" style="flex: 1;">
            <h4>Уровень риска</h4>
            <div style="font-size: 2rem; font-weight: 800; color: var(--accent-4); margin: 15px 0;" id="riskLevel">Средний</div>
            <div class="muted">На основе распределения активов</div>
          </div>
          <div class="card" style="flex: 1;">
            <h4>Рекомендации</h4>
            <div style="margin: 15px 0;">
              <div class="badge badge-success" style="margin-bottom: 10px;">Диверсифицированный</div>
              <div class="muted" style="font-size: 0.9rem;">Портфель хорошо сбалансирован</div>
            </div>
          </div>
        </div>
        <div class="portfolio-chart">
          <canvas id="assetChart" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div style="margin-top: 30px; text-align: center;">
          <button class="btn btn-primary" onclick="simulatePortfolio()">
            <i class="fas fa-play"></i> Запустить симуляцию
          </button>
          <button class="btn btn-ghost" onclick="resetPortfolio()" style="margin-left: 10px;">
            <i class="fas fa-redo"></i> Сбросить
          </button>
          <button class="btn btn-secondary" onclick="savePortfolio()" style="margin-left: 10px;">
            <i class="fas fa-save"></i> Сохранить
          </button>
        </div>
      </div>
    </section>
    <section id="financial-health">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-heartbeat"></i> Анализ</span>
        <h2 class="gradient-text">Ваше финансовое здоровье</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Оцените состояние ваших финансов и получите рекомендации</p>
      </div>
      <div class="financial-health">
        <div class="health-score">
          <div class="health-score-inner">
            <div style="font-size: 2rem; font-weight: 800; color: var(--accent);">78</div>
            <div class="muted" style="font-size: 0.9rem;">из 100</div>
          </div>
        </div>
        <div class="health-metrics">
          <div class="card">
            <h4><i class="fas fa-shield-alt" style="color: var(--success);"></i> Финансовая безопасность</h4>
            <div class="progress-bar-horizontal" style="margin: 15px 0;">
              <div class="progress-fill" style="width: 85%;"></div>
            </div>
            <div class="muted">Резерв на 6 месяцев расходов</div>
          </div>
          <div class="card">
            <h4><i class="fas fa-chart-line" style="color: var(--accent);"></i> Инвестиционная активность</h4>
            <div class="progress-bar-horizontal" style="margin: 15px 0;">
              <div class="progress-fill" style="width: 65%;"></div>
            </div>
            <div class="muted">25% дохода идет на инвестиции</div>
          </div>
          <div class="card">
            <h4><i class="fas fa-credit-card" style="color: var(--accent-4);"></i> Контроль долгов</h4>
            <div class="progress-bar-horizontal" style="margin: 15px 0;">
              <div class="progress-fill" style="width: 90%;"></div>
            </div>
            <div class="muted">Низкий уровень задолженности</div>
          </div>
          <div class="card">
            <h4><i class="fas fa-bullseye" style="color: var(--accent-3);"></i> Достижение целей</h4>
            <div class="progress-bar-horizontal" style="margin: 15px 0;">
              <div class="progress-fill" style="width: 72%;"></div>
            </div>
            <div class="muted">3 из 5 целей в процессе</div>
          </div>
        </div>
        <div style="margin-top: 30px; text-align: center;">
          <button class="btn btn-primary" onclick="improveFinancialHealth()">
            <i class="fas fa-stethoscope"></i> Получить план улучшения
          </button>
        </div>
      </div>
    </section>
    <section id="signals">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-bolt"></i> Торговля</span>
        <h2 class="gradient-text">Торговые сигналы</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Автоматические сигналы для покупки и продажи на основе анализа</p>
      </div>
      <div class="signals-widget">
        <div id="signalContainer">
        </div>
        <div style="text-align: center; margin-top: 20px;">
          <button class="btn btn-primary" onclick="generateSignal()">
            <i class="fas fa-plus"></i> Сгенерировать тестовый сигнал
          </button>
          <button class="btn btn-ghost" onclick="clearSignals()" style="margin-left: 10px;">
            <i class="fas fa-trash"></i> Очистить
          </button>
        </div>
      </div>
      <div class="trader-weather" style="margin-top: 40px;">
        <div class="weather-card up">
          <i class="fas fa-chart-line"></i>
          <h4>Акции США</h4>
          <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);">+1.8%</div>
          <div class="muted">S&P 500 растет</div>
        </div>
        <div class="weather-card down">
          <i class="fas fa-oil-can"></i>
          <h4>Нефть</h4>
          <div style="font-size: 1.5rem; font-weight: 700; color: var(--danger);">-2.3%</div>
          <div class="muted">Brent снижается</div>
        </div>
        <div class="weather-card up">
          <i class="fab fa-bitcoin"></i>
          <h4>Криптовалюты</h4>
          <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);">+3.5%</div>
          <div class="muted">Bitcoin обновляет максимумы</div>
        </div>
        <div class="weather-card neutral">
          <i class="fas fa-gem"></i>
          <h4>Золото</h4>
          <div style="font-size: 1.5rem; font-weight: 700; color: var(--muted);">+0.2%</div>
          <div class="muted">Стабильная торговля</div>
        </div>
      </div>
    </section>
    <section id="screener">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-search-dollar"></i> Поиск</span>
        <h2 class="gradient-text">Скринер акций</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Найдите перспективные акции по заданным критериям</p>
      </div>
      <div class="stock-screener">
        <div class="screener-filters">
          <div class="card">
            <h4>Рыночная капитализация</h4>
            <select style="width: 100%; margin-top: 10px;">
              <option>Любая</option>
              <option>Менее $1 млрд</option>
              <option>$1-10 млрд</option>
              <option>Более $10 млрд</option>
            </select>
          </div>
          <div class="card">
            <h4>Дивидендная доходность</h4>
            <select style="width: 100%; margin-top: 10px;">
              <option>Любая</option>
              <option>Более 3%</option>
              <option>Более 5%</option>
              <option>Более 7%</option>
            </select>
          </div>
          <div class="card">
            <h4>P/E ratio</h4>
            <select style="width: 100%; margin-top: 10px;">
              <option>Любой</option>
              <option>Менее 15</option>
              <option>15-25</option>
              <option>Более 25</option>
            </select>
          </div>
          <div class="card">
            <h4>Рост выручки</h4>
            <select style="width: 100%; margin-top: 10px;">
              <option>Любой</option>
              <option>Более 10%</option>
              <option>Более 20%</option>
              <option>Более 30%</option>
            </select>
          </div>
        </div>
        <button class="btn btn-primary" style="width: 100%;" onclick="runScreener()">
          <i class="fas fa-search"></i> Найти акции
        </button>
        <div class="stock-grid" style="margin-top: 30px;">
          <div class="stock-card">
            <div style="font-weight: 700; font-size: 1.2rem;">AAPL</div>
            <div class="muted" style="font-size: 0.9rem; margin-bottom: 10px;">Apple Inc.</div>
            <div style="font-weight: 700; color: var(--success);">+2.3%</div>
            <div style="font-size: 0.9rem;">$172.50</div>
          </div>
          <div class="stock-card">
            <div style="font-weight: 700; font-size: 1.2rem;">MSFT</div>
            <div class="muted" style="font-size: 0.9rem; margin-bottom: 10px;">Microsoft</div>
            <div style="font-weight: 700; color: var(--success);">+1.8%</div>
            <div style="font-size: 0.9rem;">$398.20</div>
          </div>
          <div class="stock-card">
            <div style="font-weight: 700; font-size: 1.2rem;">GOOGL</div>
            <div class="muted" style="font-size: 0.9rem; margin-bottom: 10px;">Alphabet</div>
            <div style="font-weight: 700; color: var(--danger);">-0.5%</div>
            <div style="font-size: 0.9rem;">$142.30</div>
          </div>
          <div class="stock-card">
            <div style="font-weight: 700; font-size: 1.2rem;">TSLA</div>
            <div class="muted" style="font-size: 0.9rem; margin-bottom: 10px;">Tesla</div>
            <div style="font-weight: 700; color: var(--success);">+3.2%</div>
            <div style="font-size: 0.9rem;">$245.80</div>
          </div>
          <div class="stock-card">
            <div style="font-weight: 700; font-size: 1.2rem;">NVDA</div>
            <div class="muted" style="font-size: 0.9rem; margin-bottom: 10px;">NVIDIA</div>
            <div style="font-weight: 700; color: var(--success);">+5.1%</div>
            <div style="font-size: 0.9rem;">$495.20</div>
          </div>
          <div class="stock-card">
            <div style="font-weight: 700; font-size: 1.2rem;">AMZN</div>
            <div class="muted" style="font-size: 0.9rem; margin-bottom: 10px;">Amazon</div>
            <div style="font-weight: 700; color: var(--danger);">-1.2%</div>
            <div style="font-size: 0.9rem;">$178.40</div>
          </div>
        </div>
      </div>
    </section>
    <section id="goals">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-bullseye"></i> Планирование</span>
        <h2 class="gradient-text">Финансовые цели</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Ставьте цели и отслеживайте прогресс их достижения</p>
      </div>
      <div class="goals-planner">
        <div class="goal-card">
          <div style="text-align: center; min-width: 60px;">
            <div style="font-size: 1.5rem; color: var(--accent);">
              <i class="fas fa-home"></i>
            </div>
            <div class="muted" style="font-size: 0.8rem;">Квартира</div>
          </div>
          <div class="goal-progress">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <div style="font-weight: 600;">Первоначальный взнос на ипотеку</div>
              <div style="font-weight: 600; color: var(--accent);">65%</div>
            </div>
            <div class="progress-bar-horizontal">
              <div class="progress-fill" style="width: 65%;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9rem;">
              <div class="muted">Собрано: 975,000 ₽</div>
              <div class="muted">Цель: 1,500,000 ₽</div>
            </div>
          </div>
          <div style="min-width: 100px; text-align: center;">
            <div style="font-weight: 700;">14 мес.</div>
            <div class="muted" style="font-size: 0.8rem;">Осталось</div>
          </div>
        </div>
        <div class="goal-card">
          <div style="text-align: center; min-width: 60px;">
            <div style="font-size: 1.5rem; color: var(--accent-4);">
              <i class="fas fa-car"></i>
            </div>
            <div class="muted" style="font-size: 0.8rem;">Автомобиль</div>
          </div>
          <div class="goal-progress">
            <div style="display: lex; justify-content: space-between; margin-bottom: 8px;">
              <div style="font-weight: 600;">Новый автомобиль</div>
              <div style="font-weight: 600; color: var(--accent-4);">42%</div>
            </div>
            <div class="progress-bar-horizontal">
              <div class="progress-fill" style="width: 42%;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9rem;">
              <div class="muted">Собрано: 630,000 ₽</div>
              <div class="muted">Цель: 1,500,000 ₽</div>
            </div>
          </div>
          <div style="min-width: 100px; text-align: center;">
            <div style="font-weight: 700;">8 мес.</div>
            <div class="muted" style="font-size: 0.8rem;">Осталось</div>
          </div>
        </div>
        <div class="goal-card">
          <div style="text-align: center; min-width: 60px;">
            <div style="font-size: 1.5rem; color: var(--accent-3);">
              <i class="fas fa-umbrella-beach"></i>
            </div>
            <div class="muted" style="font-size: 0.8rem;">Отпуск</div>
          </div>
          <div class="goal-progress">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <div style="font-weight: 600;">Отдых на Мальдивах</div>
              <div style="font-weight: 600; color: var(--accent-3);">90%</div>
            </div>
            <div class="progress-bar-horizontal">
              <div class="progress-fill" style="width: 90%;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9rem;">
              <div class="muted">Собрано: 270,000 ₽</div>
              <div class="muted">Цель: 300,000 ₽</div>
            </div>
          </div>
          <div style="min-width: 100px; text-align: center;">
            <div style="font-weight: 700;">1 мес.</div>
            <div class="muted" style="font-size: 0.8rem;">Осталось</div>
          </div>
        </div>
        <div style="text-align: center; margin-top: 30px;">
          <button class="btn btn-primary" onclick="addNewGoal()">
            <i class="fas fa-plus"></i> Добавить новую цель
          </button>
          <button class="btn btn-ghost" onclick="showGoalStrategies()" style="margin-left: 10px;">
            <i class="fas fa-lightbulb"></i> Стратегии достижения
          </button>
        </div>
      </div>
    </section>
    <section id="strategies">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-chess-king"></i> Тактика</span>
        <h2 class="gradient-text">Инвестиционные стратегии</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Выберите стратегию, соответствующую вашим целям и уровню риска</p>
      </div>
      <div class="strategies-grid">
        <div class="strategy-card popular">
          <div class="strategy-tag">Популярная</div>
          <h4><i class="fas fa-balance-scale" style="color: var(--accent); margin-right: 10px;"></i> Сбалансированная</h4>
          <p class="muted" style="margin: 15px 0;">Оптимальное соотношение риска и доходности для большинства инвесторов.</p>
          <div class="row" style="margin-top: 20px;">
            <div>
              <div style="font-weight: 700; color: var(--accent);">9-12%</div>
              <div class="muted" style="font-size: 0.85rem;">Доходность</div>
            </div>
            <div>
              <div style="font-weight: 700; color: var(--accent-4);">Средний</div>
              <div class="muted" style="font-size: 0.85rem;">Риск</div>
            </div>
          </div>
        </div>
        <div class="strategy-card">
          <h4><i class="fas fa-shield-alt" style="color: var(--success); margin-right: 10px;"></i> Консервативная</h4>
          <p class="muted" style="margin: 15px 0;">Минимальный риск с гарантированной, но небольшой доходностью.</p>
          <div class="row" style="margin-top: 20px;">
            <div>
              <div style="font-weight: 700; color: var(--success);">5-7%</div>
              <div class="muted" style="font-size: 0.85rem;">Доходность</div>
            </div>
            <div>
              <div style="font-weight: 700; color: var(--success);">Низкий</div>
              <div class="muted" style="font-size: 0.85rem;">Риск</div>
            </div>
          </div>
        </div>
        <div class="strategy-card">
          <h4><i class="fas fa-bolt" style="color: var(--danger); margin-right: 10px;"></i> Агрессивная</h4>
          <p class="muted" style="margin: 15px 0;">Максимальная доходность для опытных инвесторов, готовых к риску.</p>
          <div class="row" style="margin-top: 20px;">
            <div>
              <div style="font-weight: 700; color: var(--danger);">15-25%</div>
              <div class="muted" style="font-size: 0.85rem;">Доходность</div>
            </div>
            <div>
              <div style="font-weight: 700; color: var(--danger);">Высокий</div>
              <div class="muted" style="font-size: 0.85rem;">Риск</div>
            </div>
          </div>
        </div>
        <div class="strategy-card">
          <h4><i class="fas fa-leaf" style="color: var(--accent-3); margin-right: 10px;"></i> ESG-инвестиции</h4>
          <p class="muted" style="margin: 15px 0;">Инвестиции в компании с ответственным подходом к экологии и управлению.</p>
          <div class="row" style="margin-top: 20px;">
            <div>
              <div style="font-weight: 700; color: var(--accent-3);">8-10%</div>
              <div class="muted" style="font-size: 0.85rem;">Доходность</div>
            </div>
            <div>
              <div style="font-weight: 700; color: var(--accent-4);">Средний</div>
              <div class="muted" style="font-size: 0.85rem;">Риск</div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="learning">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-graduation-cap"></i> Развитие</span>
        <h2 class="gradient-text">Обучающие материалы</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Повышайте финансовую грамотность с нашими курсами</p>
      </div>
      <div class="learning-timeline">
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="card">
            <h4>Основы инвестирования</h4>
            <p class="muted">Изучите базовые понятия и принципы успешного инвестирования.</p>
            <div class="badge badge-primary" style="margin-top: 10px;">Для начинающих</div>
          </div>
        </div>
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="card">
            <h4>Технический анализ</h4>
            <p class="muted">Научитесь читать графики и прогнозировать движение цен.</p>
            <div class="badge badge-warning" style="margin-top: 10px;">Продвинутый уровень</div>
          </div>
        </div>
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="card">
            <h4>Портфельные стратегии</h4>
            <p class="muted">Создавайте диверсифицированные портфели под ваши цели.</p>
            <div class="badge badge-success" style="margin-top: 10px;">Практика</div>
          </div>
        </div>
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="card">
            <h4>Психология трейдинга</h4>
            <p class="muted">Контролируйте эмоции и избегайте ошибок при инвестировании.</p>
            <div class="badge badge-purple" style="margin-top: 10px;">Мастер-класс</div>
          </div>
        </div>
      </div>
      <div class="podcast-player">
        <h4><i class="fas fa-podcast" style="color: var(--accent-3); margin-right: 10px;"></i> Финансовый подкаст</h4>
        <p class="muted" style="margin: 10px 0;">"Инвестиции для начинающих" - 45 минут полезной информации</p>
        <div class="audio-controls">
          <button class="play-btn" id="playBtn">
            <i class="fas fa-play"></i>
          </button>
          <div class="progress-container">
            <div class="progress-bar-audio" id="audioProgress"></div>
          </div>
          <div style="min-width: 40px; text-align: center;">2:30</div>
        </div>
      </div>
    </section>
    <section id="social-trading">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-users"></i> Сообщество</span>
        <h2 class="gradient-text">Социальный трейдинг</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Следите за успешными трейдерами и копируйте их стратегии</p>
      </div>
      <div class="social-trading">
        <div class="trader-card">
          <div style="display: flex; align-items: center; gap: 15px;">
            <div class="trader-rank">1</div>
            <div>
              <div style="font-weight: 700;">Алексей Новиков</div>
              <div class="muted" style="font-size: 0.9rem;">Специалист по технологическим акциям</div>
            </div>
          </div>
          <div style="text-align: right;">
            <div style="font-weight: 700; color: var(--success);">+42.5%</div>
            <div class="muted" style="font-size: 0.9rem;">За 12 месяцев</div>
          </div>
        </div>
        <div class="trader-card">
          <div style="display: flex; align-items: center; gap: 15px;">
            <div class="trader-rank">2</div>
            <div>
              <div style="font-weight: 700;">Марина Соколова</div>
              <div class="muted" style="font-size: 0.9rem;">Эксперт по дивидендным акциям</div>
            </div>
          </div>
          <div style="text-align: right;">
            <div style="font-weight: 700; color: var(--success);">+28.3%</div>
            <div class="muted" style="font-size: 0.9rem;">За 12 месяцев</div>
          </div>
        </div>
        <div class="trader-card">
          <div style="display: flex; align-items: center; gap: 15px;">
            <div class="trader-rank">3</div>
            <div>
              <div style="font-weight: 700;">Дмитрий Волков</div>
              <div class="muted" style="font-size: 0.9rem;">Криптотрейдер</div>
            </div>
          </div>
          <div style="text-align: right;">
            <div style="font-weight: 700; color: var(--danger);">+65.2%</div>
            <div class="muted" style="font-size: 0.9rem;">За 12 месяцев</div>
          </div>
        </div>
      </div>
      <div style="text-align: center; margin-top: 30px;">
        <button class="btn btn-primary" onclick="joinSocialTrading()">
          <i class="fas fa-user-plus"></i> Присоединиться к сообществу
        </button>
      </div>
    </section>
    <section id="achievements">
      <div class="section-header">
        <span class="eyebrow"><i class="fas fa-trophy"></i> Мотивация</span>
        <h2 class="gradient-text">Достижения и награды</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Зарабатывайте достижения за инвестиционную активность</p>
      </div>
      <div class="achievements">
        <div class="achievement-grid">
          <div class="achievement-card">
            <div class="achievement-icon">
              <i class="fas fa-seedling"></i>
            </div>
            <div>
              <div style="font-weight: 700;">Начинающий инвестор</div>
              <div class="muted" style="font-size: 0.9rem;">Откройте первый инвестиционный счет</div>
            </div>
            <div style="margin-left: auto; color: var(--accent-4);">
              <i class="fas fa-check-circle"></i>
            </div>
          </div>
          <div class="achievement-card">
            <div class="achievement-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <div>
              <div style="font-weight: 700;">Первая прибыль</div>
              <div class="muted" style="font-size: 0.9rem;">Заработайте первую 1000 ₽ на инвестициях</div>
            </div>
            <div style="margin-left: auto; color: var(--accent-4);">
              <i class="fas fa-check-circle"></i>
            </div>
          </div>
          <div class="achievement-card achievement-locked">
            <div class="achievement-icon">
              <i class="fas fa-diversity"></i>
            </div>
            <div>
              <div style="font-weight: 700;">Диверсификатор</div>
              <div class="muted" style="font-size: 0.9rem;">Инвестируйте в 5 разных активов</div>
            </div>
            <div style="margin-left: auto; color: var(--muted);">
              <i class="fas fa-lock"></i>
            </div>
          </div>
          <div class="achievement-card achievement-locked">
            <div class="achievement-icon">
              <i class="fas fa-gem"></i>
            </div>
            <div>
              <div style="font-weight: 700;">Миллионер</div>
              <div class="muted" style="font-size: 0.9rem;">Достигните портфеля в 1,000,000 ₽</div>
            </div>
            <div style="margin-left: auto; color: var(--muted);">
              <i class="fas fa-lock"></i>
            </div>
          </div>
        </div>
        <div style="text-align: center; margin-top: 30px;">
          <div style="display: inline-flex; align-items: center; gap: 15px; background: var(--card); padding: 15px 25px; border-radius: 50px;">
            <div style="font-size: 2rem; color: var(--accent-4);">
              <i class="fas fa-trophy"></i>
            </div>
            <div>
              <div style="font-weight: 700;">Уровень: Новичок</div>
              <div class="muted">2 из 12 достижений разблокировано</div>
            </div>
            <div class="progress-bar-horizontal" style="width: 100px;">
              <div class="progress-fill" style="width: 17%;"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="news">
      <div class="section-header">
        <span class="eyebrow">Аналитика</span>
        <h2>Последние новости рынка</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Актуальные финансовые новости и аналитические обзоры</p>
      </div>
      <div class="news-grid">
        <div class="news-card">
          <div class="news-image">
            <i class="fas fa-chart-bar"></i>
          </div>
          <div class="news-content">
            <div class="news-tag">Рынок акций</div>
            <h3>Рост технологического сектора</h3>
            <p class="muted">Акции технологических компаний показали рост на 5% после публикации квартальных отчетов.</p>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
              <div class="muted" style="font-size: 0.9rem;"><i class="far fa-clock"></i> 2 часа назад</div>
              <button class="btn btn-ghost btn-small">Читать</button>
            </div>
          </div>
        </div>
        <div class="news-card">
          <div class="news-image">
            <i class="fab fa-bitcoin"></i>
          </div>
          <div class="news-content">
            <div class="news-tag">Криптовалюты</div>
            <h3>Биткоин обновил максимум</h3>
            <p class="muted">Курс Bitcoin достиг $70,000 на фоне повышения интереса институциональных инвесторов.</p>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
              <div class="muted" style="font-size: 0.9rem;"><i class="far fa-clock"></i> 5 часов назад</div>
              <button class="btn btn-ghost btn-small">Читать</button>
            </div>
          </div>
        </div>
        <div class="news-card">
          <div class="news-image">
            <i class="fas fa-globe-europe"></i>
          </div>
          <div class="news-content">
            <div class="news-tag">Мировая экономика</div>
            <h3>Решение ФРС по ставкам</h3>
            <p class="muted">Федеральная резервная система сохранила ключевую ставку на прежнем уровне 5.5%.</p>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
              <div class="muted" style="font-size: 0.9rem;"><i class="far fa-clock"></i> 1 день назад</div>
              <button class="btn btn-ghost btn-small">Читать</button>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="testimonials">
      <div class="section-header">
        <span class="eyebrow">Отзывы</span>
        <h2>Что говорят наши клиенты</h2>
        <p class="muted" style="max-width: 600px; margin: 0 auto;">Более 8,900 инвесторов доверили нам управление своими финансами</p>
      </div>
      <div class="testimonials-slider">
        <div class="row" style="gap: 20px;">
          <div class="testimonial-card" style="flex: 1;">
            <div style="font-size: 1.5rem; color: var(--accent-4); margin-bottom: 15px;">
              <i class="fas fa-quote-left"></i>
            </div>
            <p>"Благодаря WealthWise я смог увеличить свой инвестиционный портфель на 35% за год. Инструменты и аналитика помогли принимать правильные решения."</p>
            <div class="testimonial-author">
              <div class="author-avatar">АК</div>
              <div>
                <div style="font-weight: 700;">Алексей К.</div>
                <div class="muted">Инвестор, 2 года с нами</div>
              </div>
            </div>
          </div>
          <div class="testimonial-card" style="flex: 1;">
            <div style="font-size: 1.5rem; color: var(--accent-4); margin-bottom: 15px;">
              <i class="fas fa-quote-left"></i>
            </div>
            <p>"Калькуляторы и симуляторы портфеля - это просто находка для начинающего инвестора. Все понятно, наглядно и помогает избежать ошибок."</p>
            <div class="testimonial-author">
              <div class="author-avatar">МС</div>
              <div>
                <div style="font-weight: 700;">Марина С.</div>
                <div class="muted">Начинающий инвестор</div>
              </div>
            </div>
          </div>
          <div class="testimonial-card" style="flex: 1;">
            <div style="font-size: 1.5rem; color: var(--accent-4); margin-bottom: 15px;">
              <i class="fas fa-quote-left"></i>
            </div>
            <p>"Профессиональная аналитика и своевременные сигналы помогают оставаться в плюсе даже в периоды волатильности рынка. Рекомендую!"</p>
            <div class="testimonial-author">
              <div class="author-avatar">ДИ</div>
              <div>
                <div style="font-weight: 700;">Дмитрий И.</div>
                <div class="muted">Опытный трейдер</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div class="container" style="display:flex;justify-content:space-between;align-items:flex-start;gap:40px;flex-wrap:wrap">
      <div style="flex: 1; min-width: 250px;">
        <div class="brand" style="margin-bottom: 16px;">
          <div class="logo">W</div>
          <div>
            <div style="font-weight:700; font-size: 1.3rem;" class="gradient-text">WealthWise Pro</div>
            <div class="muted">Платформа для инвестиций • Финансы • Планирование</div>
          </div>
        </div>
        <p class="muted" style="margin-bottom: 20px;">Профессиональные инструменты для успешного инвестирования с 2020 года.</p>
        <div style="display: flex; gap: 12px;">
          <a href="#" class="muted" style="width: 36px; height: 36px; border-radius: 50%; background: rgba(14, 165, 163, 0.1); display: flex; align-items: center; justify-content: center; text-decoration: none;" title="Telegram">
            <i class="fab fa-telegram" style="color: var(--accent);"></i>
          </a>
          <a href="#" class="muted" style="width: 36px; height: 36px; border-radius: 50%; background: rgba(14, 165, 163, 0.1); display: flex; align-items: center; justify-content: center; text-decoration: none;" title="ВКонтакте">
            <i class="fab fa-vk" style="color: var(--accent);"></i>
          </a>
          <a href="#" class="muted" style="width: 36px; height: 36px; border-radius: 50%; background: rgba(14, 165, 163, 0.1); display: flex; align-items: center; justify-content: center; text-decoration: none;" title="YouTube">
            <i class="fab fa-youtube" style="color: var(--accent);"></i>
          </a>
          <a href="#" class="muted" style="width: 36px; height: 36px; border-radius: 50%; background: rgba(14, 165, 163, 0.1); display: flex; align-items: center; justify-content: center; text-decoration: none;" title="Twitter">
            <i class="fab fa-twitter" style="color: var(--accent);"></i>
          </a>
        </div>
      </div>
      <div style="flex: 1; min-width: 200px;">
        <div style="font-weight:700; margin-bottom: 16px;">Инструменты</div>
        <div style="display: flex; flex-direction: column; gap: 10px;">
          <a href="#calculators" class="muted" style="text-decoration: none;"><i class="fas fa-chevron-right" style="margin-right: 8px; font-size: 0.8rem;"></i> Калькуляторы</a>
          <a href="#portfolio" class="muted" style="text-decoration: none;"><i class="fas fa-chevron-right" style="margin-right: 8px; font-size: 0.8rem;"></i> Портфель</a>
          <a href="#screener" class="muted" style="text-decoration: none;"><i class="fas fa-chevron-right" style="margin-right: 8px; font-size: 0.8rem;"></i> Скринер акций</a>
          <a href="#strategies" class="muted" style="text-decoration: none;"><i class="fas fa-chevron-right" style="margin-right: 8px; font-size: 0.8rem;"></i> Стратегии</a>
          <a href="#learning" class="muted" style="text-decoration: none;"><i class="fas fa-chevron-right" style="margin-right: 8px; font-size: 0.8rem;"></i> Обучение</a>
        </div>
      </div>
      <div style="flex: 1; min-width: 200px;">
        <div style="font-weight:700; margin-bottom: 16px;">Ресурсы</div>
        <div style="display: flex; flex-direction: column; gap: 10px;">
          <a href="#" class="muted" style="text-decoration: none;"><i class="fas fa-book" style="margin-right: 8px;"></i> База знаний</a>
          <a href="#" class="muted" style="text-decoration: none;"><i class="fas fa-podcast" style="margin-right: 8px;"></i> Подкасты</a>
          <a href="#" class="muted" style="text-decoration: none;"><i class="fas fa-video" style="margin-right: 8px;"></i> Видеоуроки</a>
          <a href="#" class="muted" style="text-decoration: none;"><i class="fas fa-file-alt" style="margin-right: 8px;"></i> Блог</a>
          <a href="#" class="muted" style="text-decoration: none;"><i class="fas fa-chart-bar" style="margin-right: 8px;"></i> Исследования</a>
        </div>
      </div>
      <div style="flex: 1; min-width: 200px;">
        <div style="font-weight:700; margin-bottom: 16px;">Контакты</div>
        <div style="display: flex; flex-direction: column; gap: 10px;">
          <div class="muted"><i class="fas fa-envelope" style="margin-right: 8px; color: var(--accent);"></i> pro@wealthwise.ru</div>
          <div class="muted"><i class="fas fa-phone" style="margin-right: 8px; color: var(--accent);"></i> 8 (800) 555-35-35</div>
          <div class="muted"><i class="fas fa-map-marker-alt" style="margin-right: 8px; color: var(--accent);"></i> Москва, ул. Инвестиционная, 15</div>
          <div class="muted"><i class="fas fa-clock" style="margin-right: 8px; color: var(--accent);"></i> Пн-Пт: 9:00-18:00</div>
        </div>
      </div>
    </div>
    <div class="container" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(15,23,42,0.06); display: flex; justify-content: space-between; align-items: center; gap: 12px; flex-wrap: wrap;">
      <div>
        <div class="muted">© 2025 WealthWise Pro. Все права защищены.</div>
        <div class="muted" style="font-size: 0.85rem; margin-top: 5px;">Инвестиции связаны с риском потери средств</div>
      </div>
      <div style="display:flex;gap:20px;align-items:center;">
        <a class="muted" style="text-decoration: none;" onclick="openSettings()">Настройки</a>
        <a class="muted" style="text-decoration: none;">Политика конфиденциальности</a>
        <a class="muted" style="text-decoration: none;">Договор оферты</a>
      </div>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('WealthWise Pro инициализирован');
      loadSettings();
      initCharts();
      initTicker();
      initAnimations();
      setTimeout(calculateROI, 500);
      setTimeout(convertCurrency, 600);
      setTimeout(convertCrypto, 700);
      setTimeout(() => {
        showNotification('Добро пожаловать в WealthWise Pro! Используйте все инструменты для успешного инвестирования.');
      }, 1000);
      showOnboarding();
    });
    let portfolioChart, assetChart;
    function initCharts() {
      const portfolioCtx = document.getElementById('portfolioChart')?.getContext('2d');
      if (portfolioCtx) {
        portfolioChart = new Chart(portfolioCtx, {
          type: 'line',
          data: {
            labels: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],
            datasets: [{
              label: 'Рост портфеля',
              data: [100, 105, 103, 110, 115, 118, 120, 125, 130, 135, 140, 145],
              borderColor: '#0ea5a3',
              backgroundColor: 'rgba(14, 165, 163, 0.1)',
              borderWidth: 3,
              fill: true,
              tension: 0.4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              y: { beginAtZero: false, grid: { color: 'rgba(0,0,0,0.05)' } },
              x: { grid: { color: 'rgba(0,0,0,0.05)' } }
            }
          }
        });
      }
      const assetCtx = document.getElementById('assetChart')?.getContext('2d');
      if (assetCtx) {
        assetChart = new Chart(assetCtx, {
          type: 'doughnut',
          data: {
            labels: ['Акции', 'Облигации', 'Криптовалюты', 'Недвижимость'],
            datasets: [{
              data: [40, 30, 20, 10],
              backgroundColor: ['#2563eb', '#10b981', '#f59e0b', '#8b5cf6'],
              borderWidth: 2,
              borderColor: 'var(--card)'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom',
                labels: { padding: 20, usePointStyle: true }
              }
            }
          }
        });
      }
    }
    function initTicker() {
      const tickerData = [
        { icon: 'fas fa-dollar-sign', text: 'USD/RUB: 92.45', change: '+0.5%', direction: 'up' },
        { icon: 'fas fa-euro-sign', text: 'EUR/RUB: 99.80', change: '-0.3%', direction: 'down' },
        { icon: 'fas fa-yen-sign', text: 'CNY/RUB: 12.75', change: '+0.2%', direction: 'up' },
        { icon: 'fab fa-bitcoin', text: 'BTC: $67,450', change: '+3.2%', direction: 'up' },
        { icon: 'fab fa-ethereum', text: 'ETH: $3,450', change: '+1.8%', direction: 'up' },
        { icon: 'fas fa-chart-line', text: 'S&P 500: +0.8%', change: '+0.8%', direction: 'up' },
        { icon: 'fas fa-oil-can', text: 'Нефть: $78.50', change: '-1.2%', direction: 'down' },
        { icon: 'fas fa-gem', text: 'Золото: $2,350', change: '+0.5%', direction: 'up' }
      ];
      const tickerContent = document.getElementById('tickerContent');
      if (!tickerContent) return;
      tickerContent.innerHTML = '';
      tickerData.forEach(item => {
        const tickerItem = document.createElement('div');
        tickerItem.className = `ticker-item ${item.direction}`;
        tickerItem.innerHTML = `
          <i class="${item.icon}"></i>
          <span>${item.text}</span>
          <span style="margin-left: 8px;">${item.change}</span>
        `;
        tickerContent.appendChild(tickerItem.cloneNode(true));
        tickerContent.appendChild(tickerItem.cloneNode(true));
      });
    }
    function initAnimations() {
      const sections = document.querySelectorAll('section');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });
      sections.forEach(section => observer.observe(section));
      const animatedElements = document.querySelectorAll('.achievement-card, .recommendation-card, .goal-card, .strategy-card');
      animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
      });
      const cardObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      }, { threshold: 0.1 });
      animatedElements.forEach(el => cardObserver.observe(el));
    }
    function switchCalculator(calculator) {
      document.querySelectorAll('.calculator-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      const target = document.getElementById(`${calculator}-calculator`);
      if (target) target.classList.add('active');
      if (event && event.target) event.target.classList.add('active');
      scrollToSection('calculators');
    }
    function calculateROI() {
      const P = parseFloat(document.getElementById('principal')?.value) || 0;
      const r = parseFloat(document.getElementById('rateValue')?.textContent) / 100 || 0;
      const n = parseFloat(document.getElementById('years')?.value) || 0;
      if (P <= 0 || r <= 0 || n <= 0) {
        showNotification('Пожалуйста, заполните все поля корректно');
        return;
      }
      const finalAmount = P * Math.pow(1 + r, n);
      const profit = finalAmount - P;
      const result = document.getElementById('roiResult');
      if (!result) return;
      result.innerHTML = `
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Начальная сумма:</span>
          <strong>${formatNumber(P.toFixed(0))} ₽</strong>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Итоговая сумма:</span>
          <strong style="color: var(--accent);">${formatNumber(finalAmount.toFixed(0))} ₽</strong>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Прибыль:</span>
          <strong style="color: var(--accent-2);">${formatNumber(profit.toFixed(0))} ₽</strong>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Доходность в год:</span>
          <strong>${(r * 100).toFixed(1)}%</strong>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <span>Срок:</span>
          <strong>${n} ${declOfNum(n, ['год', 'года', 'лет'])}</strong>
        </div>
      `;
      updatePortfolioChart(finalAmount / P * 100);
      showNotification(`Расчет завершен! Ваша прибыль составит ${formatNumber(profit.toFixed(0))} ₽`);
    }
    function generateTable() {
      const P = parseFloat(document.getElementById('principal')?.value) || 0;
      const r = parseFloat(document.getElementById('rateValue')?.textContent) / 100 || 0;
      const n = parseFloat(document.getElementById('years')?.value) || 0;
      if (P <= 0 || r <= 0 || n <= 0) {
        showNotification('Пожалуйста, заполните все поля корректно');
        return;
      }
      let tableHTML = `
        <h4 style="margin-bottom: 12px;">План роста инвестиций по годам</h4>
        <table>
          <thead>
            <tr>
              <th>Год</th>
              <th>Сумма на начало</th>
              <th>Доход за год</th>
              <th>Сумма на конец</th>
            </tr>
          </thead>
          <tbody>
      `;
      let currentAmount = P;
      for (let year = 1; year <= n; year++) {
        const yearlyProfit = currentAmount * r;
        const endAmount = currentAmount + yearlyProfit;
        tableHTML += `
          <tr>
            <td>${year}</td>
            <td>${formatNumber(currentAmount.toFixed(0))} ₽</td>
            <td style="color: var(--accent);">${formatNumber(yearlyProfit.toFixed(0))} ₽</td>
            <td><strong>${formatNumber(endAmount.toFixed(0))} ₽</strong></td>
          </tr>
        `;
        currentAmount = endAmount;
      }
      tableHTML += `
          </tbody>
        </table>
      `;
      const tableContainer = document.getElementById('roiTable');
      if (tableContainer) {
        tableContainer.innerHTML = tableHTML;
        tableContainer.style.display = 'block';
      }
    }
    function clearROI() {
      const principal = document.getElementById('principal');
      const years = document.getElementById('years');
      const roiResult = document.getElementById('roiResult');
      const roiTable = document.getElementById('roiTable');
      if (principal) principal.value = '';
      if (years) years.value = '';
      if (roiResult) roiResult.innerText = '';
      if (roiTable) {
        roiTable.innerHTML = '';
        roiTable.style.display = 'none';
      }
      updateSlider('rate', 8);
    }
    const exchangeRates = {
      RUB: { USD: 0.0108, EUR: 0.0100, CNY: 0.0784, GBP: 0.0086, JPY: 1.65 },
      USD: { RUB: 92.45, EUR: 0.92, CNY: 7.25, GBP: 0.80, JPY: 152.0 },
      EUR: { RUB: 99.80, USD: 1.09, CNY: 7.85, GBP: 0.86, JPY: 165.0 },
      CNY: { RUB: 12.75, USD: 0.14, EUR: 0.13, GBP: 0.11, JPY: 21.0 },
      GBP: { RUB: 116.0, USD: 1.25, EUR: 1.16, CNY: 9.05, JPY: 190.0 },
      JPY: { RUB: 0.60, USD: 0.0066, EUR: 0.0061, CNY: 0.048, GBP: 0.0053 }
    };
    function convertCurrency() {
      const fromAmount = parseFloat(document.getElementById('fromAmount')?.value) || 0;
      const fromCurrency = document.getElementById('fromCurrency')?.value;
      const toCurrency = document.getElementById('toCurrency')?.value;
      if (fromAmount <= 0) {
        showNotification('Введите сумму для конвертации');
        return;
      }
      let result;
      if (fromCurrency === toCurrency) {
        result = fromAmount;
      } else if (exchangeRates[fromCurrency] && exchangeRates[fromCurrency][toCurrency]) {
        result = fromAmount * exchangeRates[fromCurrency][toCurrency];
      } else {
        const usdRate = exchangeRates[fromCurrency]?.USD;
        const toRate = exchangeRates.USD[toCurrency];
        result = fromAmount * usdRate * toRate;
      }
      const toAmountInput = document.getElementById('toAmount');
      if (toAmountInput) toAmountInput.value = result.toFixed(2);
      const resultElement = document.getElementById('currencyResult');
      if (resultElement) {
        resultElement.innerHTML = `
          <div style="font-size: 1.2rem; font-weight: 700; margin-bottom: 5px;">
            ${formatNumber(fromAmount.toFixed(2))} ${fromCurrency} = ${formatNumber(result.toFixed(2))} ${toCurrency}
          </div>
          <div class="muted" style="font-size: 0.9rem;">
            1 ${fromCurrency} = ${(result / fromAmount).toFixed(4)} ${toCurrency} | 1 ${toCurrency} = ${(fromAmount / result).toFixed(4)} ${fromCurrency}
          </div>
        `;
      }
    }
    function swapCurrencies() {
      const fromCurrency = document.getElementById('fromCurrency');
      const toCurrency = document.getElementById('toCurrency');
      const fromAmount = document.getElementById('fromAmount');
      const toAmount = document.getElementById('toAmount');
      if (!fromCurrency || !toCurrency || !fromAmount || !toAmount) return;
      const tempCurrency = fromCurrency.value;
      fromCurrency.value = toCurrency.value;
      toCurrency.value = tempCurrency;
      const tempAmount = fromAmount.value;
      fromAmount.value = toAmount.value;
      toAmount.value = tempAmount;
      convertCurrency();
    }
    const cryptoRates = {
      BTC: { USD: 67450, RUB: 67450 * 92.45, EUR: 67450 * 0.92, CNY: 67450 * 7.25 },
      ETH: { USD: 3450, RUB: 3450 * 92.45, EUR: 3450 * 0.92, CNY: 3450 * 7.25 },
      USDT: { USD: 1, RUB: 92.45, EUR: 0.92, CNY: 7.25 },
      BNB: { USD: 580, RUB: 580 * 92.45, EUR: 580 * 0.92, CNY: 580 * 7.25 },
      XRP: { USD: 0.52, RUB: 0.52 * 92.45, EUR: 0.52 * 0.92, CNY: 0.52 * 7.25 },
      SOL: { USD: 165, RUB: 165 * 92.45, EUR: 165 * 0.92, CNY: 165 * 7.25 }
    };
    function convertCrypto() {
      const fromAmount = parseFloat(document.getElementById('cryptoFromAmount')?.value) || 0;
      const fromCurrency = document.getElementById('cryptoFromCurrency')?.value;
      const toCurrency = document.getElementById('cryptoToCurrency')?.value;
      if (fromAmount <= 0) {
        showNotification('Введите количество криптовалюты для конвертации');
        return;
      }
      let result;
      if (cryptoRates[fromCurrency] && cryptoRates[fromCurrency][toCurrency]) {
        result = fromAmount * cryptoRates[fromCurrency][toCurrency];
      } else {
        const usdRate = cryptoRates[fromCurrency]?.USD;
        result = fromAmount * usdRate;
        if (toCurrency !== 'USD') {
          result *= exchangeRates.USD[toCurrency];
        }
      }
      const toAmountInput = document.getElementById('cryptoToAmount');
      if (toAmountInput) toAmountInput.value = result.toFixed(2);
      const resultElement = document.getElementById('cryptoResult');
      if (resultElement) {
        resultElement.innerHTML = `
          <div style="font-size: 1.2rem; font-weight: 700; margin-bottom: 5px;">
            ${fromAmount} ${fromCurrency} = ${formatNumber(result.toFixed(2))} ${toCurrency}
          </div>
          <div class="muted" style="font-size: 0.9rem;">
            Курс: 1 ${fromCurrency} = ${formatNumber((result / fromAmount).toFixed(2))} ${toCurrency}
          </div>
        `;
      }
    }
    function selectCrypto(crypto) {
      const fromCurrency = document.getElementById('cryptoFromCurrency');
      if (fromCurrency) fromCurrency.value = crypto;
      convertCrypto();
      document.querySelectorAll('.crypto-item').forEach(item => {
        item.classList.remove('selected');
      });
      if (event && event.target) {
        event.target.closest('.crypto-item')?.classList.add('selected');
      }
    }
    function calculateCompound() {
      const principal = parseFloat(document.getElementById('compoundPrincipal')?.value) || 0;
      const monthlyAddition = parseFloat(document.getElementById('monthlyAddition')?.value) || 0;
      const annualRate = parseFloat(document.getElementById('compoundRate')?.value) / 100 || 0;
      const years = parseFloat(document.getElementById('compoundYears')?.value) || 0;
      if (principal <= 0 || annualRate <= 0 || years <= 0) {
        showNotification('Пожалуйста, заполните все поля корректно');
        return;
      }
      const monthlyRate = annualRate / 12;
      const months = years * 12;
      let futureValue = principal * Math.pow(1 + monthlyRate, months);
      if (monthlyAddition > 0) {
        futureValue += monthlyAddition * ((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate);
      }
      const totalInvested = principal + (monthlyAddition * months);
      const totalProfit = futureValue - totalInvested;
      const annualizedReturn = (Math.pow(futureValue / totalInvested, 1/years) - 1) * 100;
      const resultElement = document.getElementById('compoundResult');
      if (resultElement) {
        resultElement.innerHTML = `
          <div style="margin-bottom: 15px;">
            <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent);">
              ${formatNumber(futureValue.toFixed(0))} ₽
            </div>
            <div class="muted" style="font-size: 0.9rem;">Итоговая сумма через ${years} ${declOfNum(years, ['год', 'года', 'лет'])}</div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
            <div>
              <div style="font-weight: 700;">${formatNumber(totalInvested.toFixed(0))} ₽</div>
              <div class="muted" style="font-size: 0.85rem;">Всего вложено</div>
            </div>
            <div>
              <div style="font-weight: 700; color: var(--success);">${formatNumber(totalProfit.toFixed(0))} ₽</div>
              <div class="muted" style="font-size: 0.85rem;">Общая прибыль</div>
            </div>
            <div>
              <div style="font-weight: 700;">${annualRate * 100}%</div>
              <div class="muted" style="font-size: 0.85rem;">Годовая ставка</div>
            </div>
            <div>
              <div style="font-weight: 700;">${annualizedReturn.toFixed(1)}%</div>
              <div class="muted" style="font-size: 0.85rem;">Годовая доходность</div>
            </div>
          </div>
        `;
      }
    }
    function calculateLoan() {
      const loanAmount = parseFloat(document.getElementById('loanAmountValue')?.textContent.replace(/[^\d]/g, '')) || 1000000;
      const loanTerm = parseFloat(document.getElementById('loanTermValue')?.textContent) || 10;
      const loanRate = parseFloat(document.getElementById('loanRateValue')?.textContent) / 100 || 0.08;
      const monthlyRate = loanRate / 12;
      const months = loanTerm * 12;
      const monthlyPayment = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, months) / (Math.pow(1 + monthlyRate, months) - 1);
      const totalPayment = monthlyPayment * months;
      const totalInterest = totalPayment - loanAmount;
      const resultElement = document.getElementById('loanResult');
      if (resultElement) {
        resultElement.innerHTML = `
          <div style="margin-bottom: 15px;">
            <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent);">
              ${formatNumber(monthlyPayment.toFixed(0))} ₽
            </div>
            <div class="muted" style="font-size: 0.9rem;">Ежемесячный платеж</div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
            <div>
              <div style="font-weight: 700;">${formatNumber(loanAmount.toFixed(0))} ₽</div>
              <div class="muted" style="font-size: 0.85rem;">Сумма кредита</div>
            </div>
            <div>
              <div style="font-weight: 700;">${formatNumber(totalPayment.toFixed(0))} ₽</div>
              <div class="muted" style="font-size: 0.85rem;">Общая сумма выплат</div>
            </div>
            <div>
              <div style="font-weight: 700;">${formatNumber(totalInterest.toFixed(0))} ₽</div>
              <div class="muted" style="font-size: 0.85rem;">Переплата по кредиту</div>
            </div>
            <div>
              <div style="font-weight: 700;">${loanTerm} ${declOfNum(loanTerm, ['год', 'года', 'лет'])}</div>
              <div class="muted" style="font-size: 0.85rem;">Срок кредита</div>
            </div>
          </div>
        `;
      }
    }
    let activeSlider = null;
    function startSliderDrag(e, sliderId) {
      activeSlider = sliderId;
      document.addEventListener('mousemove', dragSlider);
      document.addEventListener('mouseup', stopSliderDrag);
      e.preventDefault();
    }
    function dragSlider(e) {
      if (!activeSlider) return;
      const slider = document.getElementById(`${activeSlider}Thumb`);
      const container = slider?.parentElement;
      if (!slider || !container) return;
      const rect = container.getBoundingClientRect();
      let x = e.clientX - rect.left;
      x = Math.max(0, Math.min(x, rect.width));
      const percentage = (x / rect.width) * 100;
      updateSlider(activeSlider, percentage);
    }
    function stopSliderDrag() {
      activeSlider = null;
      document.removeEventListener('mousemove', dragSlider);
      document.removeEventListener('mouseup', stopSliderDrag);
    }
    function updateSlider(sliderId, value) {
      let displayValue, fillWidth;
      switch(sliderId) {
        case 'rate':
          displayValue = Math.round((value / 100) * 25);
          fillWidth = value;
          const rateValue = document.getElementById('rateValue');
          if (rateValue) rateValue.textContent = displayValue + '%';
          break;
        case 'loanAmount':
          displayValue = Math.round((value / 100) * 10000000);
          fillWidth = value;
          const loanAmountValue = document.getElementById('loanAmountValue');
          if (loanAmountValue) loanAmountValue.textContent = formatNumber(displayValue) + ' ₽';
          break;
        case 'loanTerm':
          displayValue = Math.round(1 + (value / 100) * 29);
          fillWidth = value;
          const loanTermValue = document.getElementById('loanTermValue');
          if (loanTermValue) loanTermValue.textContent = displayValue + ' лет';
          break;
        case 'loanRate':
          displayValue = Math.round(1 + (value / 100) * 24);
          fillWidth = value;
          const loanRateValue = document.getElementById('loanRateValue');
          if (loanRateValue) loanRateValue.textContent = displayValue + '%';
          break;
        case 'stocks':
        case 'bonds':
        case 'crypto':
        case 'realEstate':
          displayValue = Math.round(value);
          fillWidth = value;
          const valueElement = document.getElementById(`${sliderId}Value`);
          if (valueElement) valueElement.textContent = displayValue + '%';
          recalculatePortfolio();
          break;
      }
      const thumb = document.getElementById(`${sliderId}Thumb`);
      const fill = document.getElementById(`${sliderId}Fill`);
      if (thumb) thumb.style.left = fillWidth + '%';
      if (fill) fill.style.width = fillWidth + '%';
    }
    function recalculatePortfolio() {
      const stocks = parseInt(document.getElementById('stocksValue')?.textContent) || 40;
      const bonds = parseInt(document.getElementById('bondsValue')?.textContent) || 30;
      const crypto = parseInt(document.getElementById('cryptoValue')?.textContent) || 20;
      const realEstate = parseInt(document.getElementById('realEstateValue')?.textContent) || 10;
      const total = stocks + bonds + crypto + realEstate;
      if (total !== 100) {
        const correction = 100 - total;
        const stocksCorrection = Math.round(correction * (stocks / total));
        const bondsCorrection = Math.round(correction * (bonds / total));
        const cryptoCorrection = Math.round(correction * (crypto / total));
        const realEstateCorrection = correction - stocksCorrection - bondsCorrection - cryptoCorrection;
        updateSlider('stocks', Math.max(0, Math.min(100, stocks + stocksCorrection)));
        updateSlider('bonds', Math.max(0, Math.min(100, bonds + bondsCorrection)));
        updateSlider('crypto', Math.max(0, Math.min(100, crypto + cryptoCorrection)));
        updateSlider('realEstate', Math.max(0, Math.min(100, realEstate + realEstateCorrection)));
      }
      const expectedReturn = (stocks * 0.12 + bonds * 0.05 + crypto * 0.20 + realEstate * 0.07) / 100;
      const expectedReturnElement = document.getElementById('expectedReturn');
      if (expectedReturnElement) expectedReturnElement.textContent = (expectedReturn * 100).toFixed(1) + '%';
      let riskLevel;
      const riskLevelElement = document.getElementById('riskLevel');
      if (!riskLevelElement) return;
      if (crypto > 30 || stocks > 70) {
        riskLevel = 'Высокий';
        riskLevelElement.style.color = 'var(--danger)';
      } else if (crypto > 15 || stocks > 50) {
        riskLevel = 'Средний';
        riskLevelElement.style.color = 'var(--accent-4)';
      } else {
        riskLevel = 'Низкий';
        riskLevelElement.style.color = 'var(--success)';
      }
      riskLevelElement.textContent = riskLevel;
      if (assetChart) {
        assetChart.data.datasets[0].data = [stocks, bonds, crypto, realEstate];
        assetChart.update();
      }
    }
    function simulatePortfolio() {
      const stocks = parseInt(document.getElementById('stocksValue')?.textContent) || 40;
      const bonds = parseInt(document.getElementById('bondsValue')?.textContent) || 30;
      const crypto = parseInt(document.getElementById('cryptoValue')?.textContent) || 20;
      const realEstate = parseInt(document.getElementById('realEstateValue')?.textContent) || 10;
      const stockReturn = 0.12 + (Math.random() - 0.5) * 0.1;
      const bondReturn = 0.05 + (Math.random() - 0.5) * 0.03;
      const cryptoReturn = 0.20 + (Math.random() - 0.5) * 0.3;
      const realEstateReturn = 0.07 + (Math.random() - 0.5) * 0.05;
      const portfolioReturn = (stocks * stockReturn + bonds * bondReturn + crypto * cryptoReturn + realEstate * realEstateReturn) / 100;
      showNotification(`Симуляция завершена! Ожидаемая доходность: ${(portfolioReturn * 100).toFixed(1)}% за год`);
    }
    function resetPortfolio() {
      updateSlider('stocks', 40);
      updateSlider('bonds', 30);
      updateSlider('crypto', 20);
      updateSlider('realEstate', 10);
    }
    function savePortfolio() {
      const portfolioState = {
        stocks: parseInt(document.getElementById('stocksValue')?.textContent) || 40,
        bonds: parseInt(document.getElementById('bondsValue')?.textContent) || 30,
        crypto: parseInt(document.getElementById('cryptoValue')?.textContent) || 20,
        realEstate: parseInt(document.getElementById('realEstateValue')?.textContent) || 10,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem('portfolioState', JSON.stringify(portfolioState));
      showNotification('Портфель сохранен!');
    }
    function toggleAssistant() {
      const assistantChat = document.getElementById('assistantChat');
      if (assistantChat) assistantChat.classList.toggle('active');
    }
    function sendMessage(e) {
      e.preventDefault();
      const input = document.getElementById('chatInput');
      const message = input?.value.trim();
      if (!message) return;
      addMessage('user', message);
      if (input) input.value = '';
      setTimeout(() => {
        const aiResponse = generateAIResponse(message);
        addMessage('ai', aiResponse);
      }, 1000);
    }
    function addMessage(sender, text) {
      const messagesContainer = document.getElementById('chatMessages');
      if (!messagesContainer) return;
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;
      messageDiv.innerHTML = `
        <div class="avatar">${sender === 'ai' ? 'AI' : 'Вы'}</div>
        <div class="message-content">${text}</div>
      `;
      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
    function generateAIResponse(message) {
      const lowerMessage = message.toLowerCase();
      if (lowerMessage.includes('привет') || lowerMessage.includes('здравств')) {
        return 'Привет! Чем могу помочь с вашими инвестициями сегодня?';
      }
      if (lowerMessage.includes('доходность') || lowerMessage.includes('прибыль')) {
        return 'Средняя доходность портфеля составляет 9-12% годовых. Для точного расчета используйте ROI-калькулятор.';
      }
      if (lowerMessage.includes('риск') || lowerMessage.includes('опасно')) {
        return 'Риск зависит от распределения активов. Рекомендую использовать симулятор портфеля для оценки рисков.';
      }
      if (lowerMessage.includes('акци') || lowerMessage.includes('купить')) {
        return 'На основе вашего профиля рекомендую рассмотреть ETF на индекс S&P 500 для диверсификации.';
      }
      if (lowerMessage.includes('крипт') || lowerMessage.includes('биткоин')) {
        return 'Криптовалюты - высокорисковый актив. Рекомендую не более 5-10% от портфеля для диверсификации.';
      }
      if (lowerMessage.includes('курс') || lowerMessage.includes('валют')) {
        return 'Текущий курс USD/RUB: 92.45, EUR/RUB: 99.80. Для конвертации используйте конвертер валют.';
      }
      return 'Интересный вопрос! Для более точного ответа рекомендую использовать наши калькуляторы или обратиться к финансовому консультанту.';
    }
    const signals = [
      { asset: 'Apple (AAPL)', type: 'buy', price: '172.50', target: '185.00', reason: 'Прорыв сопротивления' },
      { asset: 'Tesla (TSLA)', type: 'sell', price: '245.80', target: '215.00', reason: 'Смена тренда на нисходящий' },
      { asset: 'Microsoft (MSFT)', type: 'hold', price: '398.20', target: '420.00', reason: 'Консолидация перед ростом' },
      { asset: 'Bitcoin (BTC)', type: 'buy', price: '67,450', target: '75,000', reason: 'Сильный импульсный рост' },
      { asset: 'S&P 500 ETF', type: 'buy', price: '455.20', target: '480.00', reason: 'Восстановление после коррекции' }
    ];
    function generateSignal() {
      const signal = signals[Math.floor(Math.random() * signals.length)];
      const container = document.getElementById('signalContainer');
      if (!container) return;
      const signalDiv = document.createElement('div');
      signalDiv.className = 'signal-item';
      const badgeClass = signal.type === 'buy' ? 'signal-buy' : 
                        signal.type === 'sell' ? 'signal-sell' : 'signal-hold';
      const badgeIcon = signal.type === 'buy' ? 'fa-arrow-up' : 
                       signal.type === 'sell' ? 'fa-arrow-down' : 'fa-pause';
      signalDiv.innerHTML = `
        <div class="signal-badge ${badgeClass}">
          <i class="fas ${badgeIcon}"></i>
        </div>
        <div style="flex: 1;">
          <div style="font-weight: 700;">${signal.asset}</div>
          <div class="muted" style="font-size: 0.9rem;">${signal.reason}</div>
        </div>
        <div style="text-align: right;">
          <div style="font-weight: 700;">${signal.price}$</div>
          <div class="muted" style="font-size: 0.9rem;">Целевая: ${signal.target}$</div>
        </div>
      `;
      container.insertBefore(signalDiv, container.firstChild);
      if (container.children.length > 5) {
        container.removeChild(container.lastChild);
      }
      showNotification(`Новый торговый сигнал сгенерирован: ${signal.type.toUpperCase()} ${signal.asset}`);
    }
    function clearSignals() {
      const container = document.getElementById('signalContainer');
      if (container) container.innerHTML = '';
    }
    setInterval(() => {
      if (Math.random() > 0.7) {
        generateSignal();
      }
    }, 30000);
    function quickAction(action) {
      switch(action) {
        case 'convert':
          switchCalculator('currency');
          break;
        case 'calculator':
          switchCalculator('roi');
          break;
        case 'portfolio':
          scrollToSection('portfolio');
          break;
        case 'signals':
          scrollToSection('signals');
          break;
        case 'screener':
          scrollToSection('screener');
          break;
      }
    }
    function openSettings() {
      const settingsModal = document.getElementById('settingsModal');
      if (settingsModal) settingsModal.classList.add('active');
    }
    function closeSettings() {
      const settingsModal = document.getElementById('settingsModal');
      if (settingsModal) settingsModal.classList.remove('active');
    }
    function saveSettings() {
      const activeTheme = document.querySelector('.theme-option.active')?.dataset.theme;
      if (activeTheme) {
        localStorage.setItem('theme', activeTheme);
        applyTheme(activeTheme);
      }
      const defaultCurrency = document.getElementById('defaultCurrency')?.value;
      if (defaultCurrency) localStorage.setItem('defaultCurrency', defaultCurrency);
      closeSettings();
      showNotification('Настройки сохранены!');
    }
    function loadSettings() {
      const savedTheme = localStorage.getItem('theme') || 'auto';
      document.querySelectorAll('.theme-option').forEach(option => {
        option.classList.remove('active');
        if (option.dataset.theme === savedTheme) {
          option.classList.add('active');
        }
      });
      applyTheme(savedTheme);
      const savedCurrency = localStorage.getItem('defaultCurrency') || 'RUB';
      const defaultCurrency = document.getElementById('defaultCurrency');
      if (defaultCurrency) defaultCurrency.value = savedCurrency;
      const autoSave = document.getElementById('autoSave');
      if (autoSave) autoSave.checked = localStorage.getItem('autoSave') !== 'false';
      document.getElementById('notifyMarket').checked = localStorage.getItem('notifyMarket') !== 'false';
      document.getElementById('notifySignals').checked = localStorage.getItem('notifySignals') !== 'false';
      document.getElementById('notifyGoals').checked = localStorage.getItem('notifyGoals') !== 'false';
      document.getElementById('notifyNews').checked = localStorage.getItem('notifyNews') === 'true';
    }
    function applyTheme(theme) {
      if (theme === 'auto') {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          document.documentElement.classList.add('dark-theme');
        } else {
          document.documentElement.classList.remove('dark-theme');
        }
      } else if (theme === 'dark') {
        document.documentElement.classList.add('dark-theme');
      } else {
        document.documentElement.classList.remove('dark-theme');
      }
    }
    function toggleMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const menuOverlay = document.getElementById('menuOverlay');
      if (mobileMenu) mobileMenu.classList.toggle('active');
      if (menuOverlay) menuOverlay.classList.toggle('active');
      document.body.style.overflow = mobileMenu?.classList.contains('active') ? 'hidden' : 'auto';
    }
    function closeMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      const menuOverlay = document.getElementById('menuOverlay');
      if (mobileMenu) mobileMenu.classList.remove('active');
      if (menuOverlay) menuOverlay.classList.remove('active');
      document.body.style.overflow = 'auto';
    }
    function formatNumber(n) {
      return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    }
    function declOfNum(number, titles) {
      number = Math.abs(number);
      if (number % 10 == 1 && number % 100 != 11) return titles[0];
      if ([2,3,4].indexOf(number % 10) > -1 && [12,13,14].indexOf(number % 100) === -1) return titles[1];
      return titles[2];
    }
    function showNotification(message) {
      const notification = document.getElementById('notification');
      if (!notification) return;
      const notificationText = notification.querySelector('strong');
      if (notificationText) notificationText.textContent = message;
      notification.classList.add('show');
      setTimeout(() => {
        notification.classList.remove('show');
      }, 5000);
    }
    function scrollToSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) section.scrollIntoView({ behavior: 'smooth' });
    }
    function toggleCalc() {
      scrollToSection('calculators');
    }
    function openAccount() {
      showNotification('Открытие Pro-счета. Вас перенаправят на страницу регистрации...');
    }
    function showDemo() {
      showNotification('Демонстрационный режим активирован. Теперь вы можете тестировать все функции.');
    }
    function logoAnimation() {
      const logo = document.querySelector('.logo');
      if (!logo) return;
      logo.style.animation = 'coinFlip 1s ease';
      setTimeout(() => {
        logo.style.animation = 'float 3s ease-in-out infinite';
      }, 1000);
    }
    function updatePortfolioChart(growth) {
      const baseBalance = 1847320;
      const newBalance = baseBalance * (growth / 100);
      const portfolioBalance = document.getElementById('portfolioBalance');
      const portfolioReturn = document.getElementById('portfolioReturn');
      if (portfolioBalance) portfolioBalance.textContent = formatNumber(newBalance.toFixed(0)) + ' ₽';
      if (portfolioReturn) portfolioReturn.textContent = '+' + (growth - 100).toFixed(1) + '%';
      if (portfolioChart) {
        const newData = [];
        for (let i = 0; i < 12; i++) {
          newData.push(100 + (growth - 100) * (i / 11));
        }
        portfolioChart.data.datasets[0].data = newData;
        portfolioChart.update();
      }
    }
    function editBudget() {
      showNotification('Редактирование бюджета. Функция в разработке...');
    }
    function improveFinancialHealth() {
      showNotification('Генерируем персональный план улучшения финансового здоровья...');
    }
    function runScreener() {
      showNotification('Поиск акций по заданным критериям...');
    }
    function addNewGoal() {
      showNotification('Добавление новой финансовой цели...');
    }
    function showGoalStrategies() {
      showNotification('Стратегии достижения целей. Функция в разработке...');
    }
    function joinSocialTrading() {
      showNotification('Присоединение к сообществу социального трейдинга...');
    }
    function generateReport() {
      showNotification('Генерация отчета о портфеле...');
    }
    function showOnboarding() {
      const hasSeenOnboarding = localStorage.getItem('onboardingSeen');
      if (!hasSeenOnboarding) {
        setTimeout(() => {
          showNotification('💡 Используйте панель быстрого доступа слева для быстрого перехода к инструментам.');
        }, 2000);
        setTimeout(() => {
          showNotification('🤖 Нажмите на ИИ-помощника в правом нижнем углу для получения помощи по инвестициям.');
        }, 5000);
        localStorage.setItem('onboardingSeen', 'true');
      }
    }
    document.getElementById('closeSettings')?.addEventListener('click', closeSettings);
    document.getElementById('settingsModal')?.addEventListener('click', function(e) {
      if (e.target === this) closeSettings();
    });
    document.getElementById('closeNotification')?.addEventListener('click', function() {
      const notification = document.getElementById('notification');
      if (notification) notification.classList.remove('show');
    });
    document.querySelectorAll('.theme-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
        this.classList.add('active');
      });
    });
    document.getElementById('menuToggle')?.addEventListener('click', toggleMobileMenu);
    document.getElementById('menuOverlay')?.addEventListener('click', closeMobileMenu);
    document.querySelectorAll('.mobile-nav-link').forEach(link => {
      link.addEventListener('click', closeMobileMenu);
    });
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        if (this.getAttribute('href') === '#') return;
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          targetElement.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });
    window.addEventListener('scroll', () => {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      const progressBar = document.getElementById('progressBar');
      if (progressBar) progressBar.style.width = scrolled + '%';
      const backToTop = document.getElementById('backToTop');
      if (backToTop) {
        if (window.scrollY > 300) {
          backToTop.classList.add('visible');
        } else {
          backToTop.classList.remove('visible');
        }
      }
    });
    document.getElementById('backToTop')?.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    const playBtn = document.getElementById('playBtn');
    if (playBtn) {
      playBtn.addEventListener('click', function() {
        const icon = this.querySelector('i');
        if (icon.classList.contains('fa-play')) {
          icon.classList.remove('fa-play');
          icon.classList.add('fa-pause');
        } else {
          icon.classList.remove('fa-pause');
          icon.classList.add('fa-play');
        }
      });
    }
    setInterval(() => {
      const weatherCards = document.querySelectorAll('.weather-card');
      weatherCards.forEach(card => {
        if (Math.random() > 0.5) {
          const change = (Math.random() - 0.5) * 4;
          const isPositive = change > 0;
          const changeText = `${isPositive ? '+' : ''}${change.toFixed(1)}%`;
          card.classList.remove('up', 'down', 'neutral');
          card.classList.add(isPositive ? 'up' : change === 0 ? 'neutral' : 'down');
          const valueElement = card.querySelector('div:nth-child(3)');
          if (valueElement) {
            valueElement.textContent = changeText;
            valueElement.style.color = isPositive ? 'var(--success)' : 
                                     change === 0 ? 'var(--muted)' : 'var(--danger)';
          }
          const icon = card.querySelector('i');
          if (icon) {
            if (isPositive) {
              icon.className = icon.className.replace(/(fa-arrow-down|fa-pause)/, 'fa-arrow-up');
            } else if (change === 0) {
              icon.className = icon.className.replace(/(fa-arrow-up|fa-arrow-down)/, 'fa-pause');
            } else {
              icon.className = icon.className.replace(/(fa-arrow-up|fa-pause)/, 'fa-arrow-down');
            }
          }
        }
      });
    }, 10000);
    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.shiftKey && e.key === 'C') {
        e.preventDefault();
        switchCalculator('roi');
      }
      if (e.ctrlKey && e.shiftKey && e.key === 'S') {
        e.preventDefault();
        openSettings();
      }
      if (e.key === 'Escape') {
        closeSettings();
        const assistantChat = document.getElementById('assistantChat');
        if (assistantChat) assistantChat.classList.remove('active');
      }
    });
    window.addEventListener('online', () => {
      showNotification('✅ Соединение восстановлено. Все функции доступны.');
    });
    window.addEventListener('offline', () => {
      showNotification('⚠️ Отсутствует подключение. Некоторые функции ограничены.');
    });
    console.log('WealthWise Pro полностью загружен и готов к работе!');
  </script>
</body>
</html>